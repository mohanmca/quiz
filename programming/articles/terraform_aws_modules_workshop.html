<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Terraform AWS Modules Workshop</title>
<link rel="icon" href="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 32 32'%3E%3Crect width='32' height='32' rx='6' fill='%230f766e'/%3E%3Cpath d='M8 7h16v5H8zm0 7h10v5H8zm0 7h16v4H8z' fill='%23fff'/%3E%3C/svg%3E" />
<style>
:root {
  --bg: #f4f8fb;
  --text: #102334;
  --card: #ffffff;
  --muted: #4a6377;
  --border: #d8e4ef;
  --accent: #0f766e;
  --accent-2: #d97706;
  --ok: #15803d;
  --bad: #b91c1c;
}
* { box-sizing: border-box; }
body {
  margin: 0;
  color: var(--text);
  background:
    radial-gradient(1200px 700px at -10% -20%, #d9f5ee 0%, transparent 60%),
    radial-gradient(1200px 700px at 110% 120%, #ffe8c7 0%, transparent 62%),
    var(--bg);
  font-family: "IBM Plex Sans", "Avenir Next", "Segoe UI", sans-serif;
}
#progress-bar {
  position: fixed;
  top: 0;
  left: 0;
  height: 5px;
  width: 0%;
  background: linear-gradient(90deg, var(--accent) 0%, var(--accent-2) 100%);
  z-index: 1000;
  transition: width 0.25s ease;
}
#app { max-width: 1160px; margin: 0 auto; padding: 14px; }
#header {
  position: sticky;
  top: 10px;
  z-index: 50;
  display: grid;
  grid-template-columns: 1fr auto auto;
  gap: 10px;
  align-items: center;
  background: rgba(255, 255, 255, 0.96);
  border: 1px solid var(--border);
  border-radius: 14px;
  padding: 10px 14px;
  backdrop-filter: blur(4px);
}
#module-label { font-weight: 700; }
#slide-counter { color: var(--muted); font-weight: 600; }
#header .right { display: flex; align-items: center; gap: 8px; }
button {
  border: 1px solid #b7c9d8;
  background: #fff;
  color: var(--text);
  border-radius: 10px;
  padding: 8px 11px;
  cursor: pointer;
  font-weight: 600;
}
button:hover { border-color: var(--accent); }
button:disabled { opacity: 0.55; cursor: not-allowed; }
#slide {
  margin-top: 14px;
  background: var(--card);
  border: 1px solid var(--border);
  border-radius: 14px;
  box-shadow: 0 10px 30px rgba(14, 36, 61, 0.06);
  min-height: 560px;
  padding: 34px 40px;
}
#slide h1, #slide h2, #slide h3 { margin-top: 0; }
#slide p { line-height: 1.5; }
#slide pre {
  white-space: pre;
  overflow-x: auto;
  background: #f0f6fb;
  border: 1px solid #d5e2ee;
  border-radius: 9px;
  padding: 11px;
  font-family: "JetBrains Mono", "Cascadia Mono", monospace;
  font-size: 12.5px;
}
#slide table { width: 100%; border-collapse: collapse; margin: 12px 0; font-size: 14px; }
#slide th, #slide td { border: 1px solid #d6e3ee; padding: 8px; text-align: left; vertical-align: top; }
#slide th { background: #eef5fb; }
.diagram {
  white-space: pre;
  overflow-x: auto;
  border: 2px dashed #bfd5e8;
  border-radius: 9px;
  background: #f7fbff;
  padding: 11px;
  font-family: "JetBrains Mono", "Cascadia Mono", monospace;
  margin: 10px 0;
}
.note, .tip, .warn, .real { border-left: 4px solid; border-radius: 8px; padding: 10px 12px; margin: 10px 0; }
.note { border-color: #0284c7; background: #e0f2fe; }
.tip { border-color: #0f766e; background: #dcfce7; }
.warn { border-color: #d97706; background: #fff7ed; }
.real { border-color: #b45309; background: #fffbeb; }
#nav { display: flex; justify-content: space-between; margin-top: 12px; gap: 10px; }
#nav .next { background: var(--accent); color: #fff; border-color: var(--accent); }
#nav .prev { background: #64748b; color: #fff; border-color: #64748b; }
#toc {
  position: fixed;
  top: 0;
  left: -390px;
  width: 380px;
  height: 100%;
  background: #fff;
  border-right: 1px solid var(--border);
  z-index: 210;
  transition: left 0.22s ease;
  overflow-y: auto;
  padding: 16px;
}
#toc.open { left: 0; }
#toc-overlay {
  display: none;
  position: fixed;
  inset: 0;
  background: rgba(15, 23, 42, 0.32);
  z-index: 200;
}
.toc-module { margin-bottom: 14px; }
.toc-module h3 { margin: 0 0 6px 0; font-size: 14px; color: #2d475d; }
.toc-link { display: block; font-size: 13px; text-decoration: none; color: #223648; padding: 4px 6px; border-radius: 6px; }
.toc-link.active { background: #def7ec; color: #0f766e; font-weight: 700; }
.quiz-wrap { max-width: 780px; margin: 0 auto; }
.quiz-header { margin-bottom: 10px; }
.quiz-progress { height: 9px; background: #e3edf5; border-radius: 999px; overflow: hidden; margin: 8px 0 4px 0; }
.quiz-progress > div { height: 100%; background: linear-gradient(90deg, var(--accent), #14b8a6); transition: width 0.2s ease; }
.quiz-opt {
  border: 2px solid #d4e1ec;
  border-radius: 10px;
  background: #fff;
  padding: 10px;
  margin: 7px 0;
  cursor: pointer;
}
.quiz-opt:hover { border-color: var(--accent); }
.quiz-opt.correct { border-color: #22c55e; background: #f0fdf4; }
.quiz-opt.wrong { border-color: #ef4444; background: #fef2f2; }
.quiz-opt.disabled { cursor: not-allowed; opacity: 0.82; }
.quiz-feedback { display: none; margin-top: 10px; border-radius: 9px; padding: 10px 12px; }
.quiz-feedback.show { display: block; }
.quiz-feedback.pass { background: #ecfdf5; border: 1px solid #86efac; color: #14532d; }
.quiz-feedback.fail { background: #fef2f2; border: 1px solid #fca5a5; color: #7f1d1d; }
.retry-box { border: 1px solid #dbe7f1; border-radius: 10px; background: #f8fbff; padding: 10px; margin: 8px 0; }
.kbd { font-family: "JetBrains Mono", monospace; background: #e8f1f8; border: 1px solid #cfe0ee; border-radius: 5px; padding: 1px 5px; }
@media (max-width: 900px) {
  #app { padding: 9px; }
  #header { grid-template-columns: 1fr; gap: 8px; }
  #slide { padding: 20px 18px; min-height: 500px; }
  #toc { width: 92vw; left: -92vw; }
}
</style>
</head>
<body>
<div id="progress-bar"></div>
<div id="app">
  <div id="header">
    <div id="module-label">Module</div>
    <div id="slide-counter">1 / 175</div>
    <div class="right">
      <button id="toc-btn" title="Table of contents (T)">TOC</button>
      <button id="retry-btn" title="Retry failed questions (R)">Retry</button>
      <span id="pct">0%</span>
    </div>
  </div>
  <div id="slide"></div>
  <div id="nav">
    <button class="prev" id="prev-btn">Prev</button>
    <button class="next" id="next-btn">Next</button>
  </div>
</div>
<div id="toc-overlay"></div>
<div id="toc"><h2>Table of Contents</h2><div id="toc-body"></div></div>

<script>
const STORE_KEY = 'terraform_aws_modules_workshop';
const MODULE_LABELS = ["M0: Terraform + Terragrunt + HCL Foundations", "M1: EC2 Instance Module", "M2: ECS Module", "M3: EKS Module", "M4: IAM Module", "M5: KMS Module", "M6: S3 Bucket Module", "M7: Secrets Manager Module", "M8: Security Group Module", "M9: VPC Module"];
const SLIDES = [{"id": "m0_s1", "moduleId": 0, "title": "Why Terraform + Terragrunt for Large AWS Estates and Workshop Orientation", "content": "<h2>Why Terraform + Terragrunt for Large AWS Estates and Workshop Orientation</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><div class=\"diagram\">\n               +---------------------+\nDeveloper ---&gt;| Terraform CLI       |\n               +----------+----------+\n                          |\n                          v\n               +----------+----------+\n               | Plan + State Engine |\n               +----------+----------+\n                          |\n                          v\n      +-------------------+-------------------+\n      | AWS modules: VPC/SG/IAM/KMS/S3/EKS... |\n      +---------------------------------------+\n</div><table><thead><tr><th>Layer</th><th>Primary files</th><th>Outcome</th></tr></thead><tbody><tr><td>Core behavior</td><td>/Users/mohannarayanaswamy/git/terraform/docs/README.md</td><td>Execution model and lifecycle reference</td></tr><tr><td>Architecture</td><td>/Users/mohannarayanaswamy/git/terraform/docs/architecture.md</td><td>Request flow and dependency planning</td></tr><tr><td>Planning semantics</td><td>/Users/mohannarayanaswamy/git/terraform/docs/planning-behaviors.md</td><td>Create/update/replace decision patterns</td></tr><tr><td>Debug workflow</td><td>/Users/mohannarayanaswamy/git/terraform/docs/debugging.md</td><td>Deterministic diagnostics and reproducibility</td></tr></tbody></table><div class=\"tip\"><strong>Orientation:</strong> This workshop maps each deep-dive slide to concrete files, variable traits, and output contracts.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s2", "moduleId": 0, "title": "Terraform CLI Workflow (`init`, `validate`, `plan`, `apply`, `destroy`) in Practice", "content": "<h2>Terraform CLI Workflow (`init`, `validate`, `plan`, `apply`, `destroy`) in Practice</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\nterraform init\nterraform validate\nterraform plan -out tf.plan\nterraform show -json tf.plan &gt; tfplan.json\nterraform apply tf.plan\nterraform destroy\n</pre><div class=\"warn\"><strong>Troubleshooting:</strong> Do not skip `validate` and `plan` in CI; pipeline should fail fast before mutable operations.</div><table><thead><tr><th>Command</th><th>Primary use</th><th>Failure signal</th></tr></thead><tbody><tr><td>init</td><td>Provider/backend setup</td><td>Plugin or backend mismatch</td></tr><tr><td>validate</td><td>Static syntax and type checks</td><td>Invalid references or type errors</td></tr><tr><td>plan</td><td>Action graph preview</td><td>Unexpected replace/destroy actions</td></tr><tr><td>apply</td><td>Mutating execution</td><td>Provider API or permission failures</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s3", "moduleId": 0, "title": "Terraform Core Request Flow from `architecture.md` (CLI, backend, loader, context)", "content": "<h2>Terraform Core Request Flow from `architecture.md` (CLI, backend, loader, context)</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><div class=\"diagram\">\nCLI args -&gt; loader -&gt; config graph -&gt; eval context -&gt; plan graph -&gt; provider RPCs -&gt; state write\n</div><table><thead><tr><th>Core component</th><th>Document reference</th><th>Why it matters</th></tr></thead><tbody><tr><td>Loader</td><td>/Users/mohannarayanaswamy/git/terraform/docs/architecture.md</td><td>Determines module/module-call expansion</td></tr><tr><td>Evaluation context</td><td>/Users/mohannarayanaswamy/git/terraform/docs/architecture.md</td><td>Variable/local interpolation resolution</td></tr><tr><td>Plan graph</td><td>/Users/mohannarayanaswamy/git/terraform/docs/planning-behaviors.md</td><td>Replace vs update semantics are computed here</td></tr><tr><td>State mutation</td><td>/Users/mohannarayanaswamy/git/terraform/docs/resource-instance-change-lifecycle.md</td><td>Lifecycle transitions and drift implications</td></tr></tbody></table><div class=\"real\"><strong>Code explanation:</strong> The request flow model is used as the debugging baseline in every module section.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s4", "moduleId": 0, "title": "HCL Block Types (`terraform`, `provider`, `resource`, `data`, `module`, `variable`, `output`, `locals`)", "content": "<h2>HCL Block Types (`terraform`, `provider`, `resource`, `data`, `module`, `variable`, `output`, `locals`)</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\nterraform {\n  required_version = \"&gt;= 1.5\"\n}\nprovider \"aws\" { region = var.region }\nresource \"aws_vpc\" \"this\" { cidr_block = var.cidr }\ndata \"aws_caller_identity\" \"current\" {}\nmodule \"ecs\" { source = \"./modules/service\" }\nvariable \"tags\" { type = map(string) }\noutput \"vpc_id\" { value = aws_vpc.this.id }\nlocals { env = \"prod\" }\n</pre><div class=\"tip\"><strong>Trait focus:</strong> Every module quiz includes questions on block names and variable/output traits.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s5", "moduleId": 0, "title": "HCL Type System and Expressions (string, number, bool, list, map, object)", "content": "<h2>HCL Type System and Expressions (string, number, bool, list, map, object)</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><table><thead><tr><th>Type</th><th>Example</th><th>Operational implication</th></tr></thead><tbody><tr><td>string</td><td>var.name</td><td>Naming consistency and tagging</td></tr><tr><td>number</td><td>var.deletion_window</td><td>Guardrail thresholds</td></tr><tr><td>bool</td><td>var.create</td><td>Conditional creation paths</td></tr><tr><td>object</td><td>var.capacity_reservation_specification</td><td>Nested trait validation</td></tr></tbody></table><pre>\nvariable \"replica\" {\n  type = list(object({\n    region = string\n    kms_key_id = optional(string)\n  }))\n}\n</pre><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s6", "moduleId": 0, "title": "Variables: Defaults, Validation, Sensitivity, and Nullable Patterns", "content": "<h2>Variables: Defaults, Validation, Sensitivity, and Nullable Patterns</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\nvariable \"name\" {\n  type        = string\n  nullable    = false\n  validation {\n    condition     = length(var.name) &gt; 2\n    error_message = \"Name must be longer than 2 chars\"\n  }\n}\n</pre><div class=\"warn\"><strong>Troubleshooting:</strong> Validation failures should be surfaced in PR checks before stateful apply runs.</div><table><thead><tr><th>Trait</th><th>Default</th><th>Failure mode</th></tr></thead><tbody><tr><td>nullable</td><td>false</td><td>Unexpected null access in resources</td></tr><tr><td>sensitive</td><td>true for secrets</td><td>Leak risk in logs/output</td></tr><tr><td>validation</td><td>custom regex/rules</td><td>Late apply-time failure</td></tr><tr><td>default</td><td>explicit</td><td>Implicit behavior drift across envs</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s7", "moduleId": 0, "title": "Locals, Functions, and Reusable Expression Design", "content": "<h2>Locals, Functions, and Reusable Expression Design</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\nlocals {\n  common_tags = merge(var.tags, {\n    ManagedBy = \"Terraform\"\n    Service   = var.name\n  })\n}\n</pre><table><thead><tr><th>Function</th><th>Example</th><th>Usage</th></tr></thead><tbody><tr><td>merge</td><td>merge(var.tags, local.extra)</td><td>Stable tag unions</td></tr><tr><td>coalesce</td><td>coalesce(var.name, \"default\")</td><td>Fallback trait selection</td></tr><tr><td>try</td><td>try(var.map.key, null)</td><td>Defensive reads</td></tr><tr><td>toset</td><td>toset(var.subnets)</td><td>for_each determinism</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s8", "moduleId": 0, "title": "Meta-Arguments: `count`, `for_each`, `depends_on`, `lifecycle`, `dynamic`", "content": "<h2>Meta-Arguments: `count`, `for_each`, `depends_on`, `lifecycle`, `dynamic`</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\nresource \"aws_instance\" \"this\" {\n  for_each = var.instances\n  lifecycle {\n    create_before_destroy = true\n    ignore_changes        = [ami]\n  }\n  depends_on = [aws_security_group.this]\n}\n</pre><div class=\"diagram\">\nfor_each map -&gt; instance graph nodes\ndepends_on edge -&gt; security baseline before compute\nlifecycle rules -&gt; replacement safety during updates\n</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s9", "moduleId": 0, "title": "Terragrunt Fundamentals: `terragrunt.hcl`, `include`, `locals`, and DRY environment layering", "content": "<h2>Terragrunt Fundamentals: `terragrunt.hcl`, `include`, `locals`, and DRY environment layering</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\n# terragrunt.hcl\ninclude \"root\" {\n  path = find_in_parent_folders()\n}\nlocals {\n  env = \"prod\"\n}\ninputs = {\n  region = \"us-east-1\"\n}\n</pre><div class=\"real\"><strong>Terragrunt slide 1/3:</strong> Hierarchical includes remove duplicated backend/provider blocks.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s10", "moduleId": 0, "title": "Terragrunt Dependencies: `dependency` blocks, `mock_outputs`, and `run-all` orchestration", "content": "<h2>Terragrunt Dependencies: `dependency` blocks, `mock_outputs`, and `run-all` orchestration</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\ndependency \"vpc\" {\n  config_path = \"../vpc\"\n  mock_outputs = {\n    vpc_id = \"vpc-000000\"\n  }\n}\n\nterraform {\n  source = \"../../modules/ecs-service\"\n}\n</pre><div class=\"diagram\">\nterragrunt run-all plan\n   -&gt; vpc\n   -&gt; security-group\n   -&gt; ecs-service (consumes dependency.vpc.outputs.vpc_id)\n</div><div class=\"real\"><strong>Terragrunt slide 2/3:</strong> `dependency` and `mock_outputs` keep plans deterministic in incomplete envs.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s11", "moduleId": 0, "title": "Planning Semantics from `planning-behaviors.md` (Create/Delete/Update/Replace/Read/No-op)", "content": "<h2>Planning Semantics from `planning-behaviors.md` (Create/Delete/Update/Replace/Read/No-op)</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><table><thead><tr><th>Plan action</th><th>Meaning</th><th>Runbook action</th></tr></thead><tbody><tr><td>create</td><td>New resource instance</td><td>Check quotas/limits before apply</td></tr><tr><td>update</td><td>In-place mutation</td><td>Review drift and blast radius</td></tr><tr><td>replace</td><td>Destroy+create sequence</td><td>Gate with maintenance window</td></tr><tr><td>delete</td><td>Resource removal</td><td>Confirm downstream dependency cleanup</td></tr></tbody></table><div class=\"real\"><strong>Terragrunt slide 3/3:</strong> apply order from `run-all` must align with plan action semantics.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s12", "moduleId": 0, "title": "State and Refactoring Safety: `moved` blocks, `ignore_changes`, `create_before_destroy`, drift handling", "content": "<h2>State and Refactoring Safety: `moved` blocks, `ignore_changes`, `create_before_destroy`, drift handling</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\nmoved {\n  from = aws_security_group_rule.old\n  to   = aws_vpc_security_group_ingress_rule.new\n}\n</pre><div class=\"warn\"><strong>Troubleshooting:</strong> If moves are omitted, Terraform may destroy/recreate unexpectedly. Always inspect plan replace edges.</div><table><thead><tr><th>Safety control</th><th>Primary use</th><th>Risk reduced</th></tr></thead><tbody><tr><td>moved</td><td>Refactor addresses</td><td>Unplanned destroy/create</td></tr><tr><td>ignore_changes</td><td>Provider-computed fields</td><td>Perpetual diff noise</td></tr><tr><td>create_before_destroy</td><td>Zero-downtime swaps</td><td>Service interruption</td></tr><tr><td>drift detection</td><td>State vs actual resources</td><td>Silent config divergence</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s13", "moduleId": 0, "title": "Debugging Terraform Operations using `debugging.md` (tests, Delve, VS Code launch modes)", "content": "<h2>Debugging Terraform Operations using `debugging.md` (tests, Delve, VS Code launch modes)</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\n# debug shell\nTF_LOG=TRACE terraform plan\n# delve entrypoint for Terraform core hacking\n# dlv debug ./cmd/terraform -- plan\n</pre><div class=\"warn\"><strong>Troubleshooting:</strong> Capture exact provider versions and backend config in bug reports to keep reproductions stable.</div><table><thead><tr><th>Debug mode</th><th>Reference</th><th>When to use</th></tr></thead><tbody><tr><td>TF_LOG</td><td>/Users/mohannarayanaswamy/git/terraform/docs/debugging.md</td><td>Provider request/response tracing</td></tr><tr><td>Delve</td><td>/Users/mohannarayanaswamy/git/terraform/docs/debugging.md</td><td>Core execution stepping</td></tr><tr><td>VS Code launch</td><td>/Users/mohannarayanaswamy/git/terraform/docs/debugging.md</td><td>Repeatable local breakpoints</td></tr><tr><td>Unit/integration tests</td><td>/Users/mohannarayanaswamy/git/terraform/docs/debugging.md</td><td>Regression verification</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s14", "moduleId": 0, "title": "Dockerized IaC Debug/Test Workflow (Terraform/Terragrunt in containers, LocalStack caveats, reproducible envs)", "content": "<h2>Dockerized IaC Debug/Test Workflow (Terraform/Terragrunt in containers, LocalStack caveats, reproducible envs)</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><pre>\ndocker run --rm -it   -v $PWD:/workspace   -w /workspace   hashicorp/terraform:latest plan\n\n# Terragrunt inside container\n# docker run ... ghcr.io/gruntwork-io/terragrunt run-all plan\n</pre><div class=\"diagram\">\nDeveloper laptop -&gt; container image -&gt; terraform/terragrunt CLI -&gt; AWS APIs\n                         |\n                         +-&gt; pinned tools + reproducible dependency chain\n</div><div class=\"warn\"><strong>Docker troubleshooting:</strong> LocalStack endpoint drift and credential mounts are the two most common failure roots.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s15", "moduleId": 0, "title": "Comprehensive AWS IaC Coverage Map Across Modules (VPC, SG, IAM, KMS, S3, Secrets, EC2, ECS, EKS)", "content": "<h2>Comprehensive AWS IaC Coverage Map Across Modules (VPC, SG, IAM, KMS, S3, Secrets, EC2, ECS, EKS)</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><table><thead><tr><th>Domain</th><th>Primary module</th><th>Major APIs/Integrations</th></tr></thead><tbody><tr><td>Networking</td><td>VPC + Security Group</td><td>EC2/VPC APIs, route tables, endpoints</td></tr><tr><td>Identity</td><td>IAM</td><td>STS/IAM policy evaluation APIs</td></tr><tr><td>Compute</td><td>EC2 + ECS + EKS</td><td>EC2, ECS, EKS control plane APIs</td></tr><tr><td>Data/Secrets</td><td>S3 + Secrets + KMS</td><td>S3/KMS/Secrets Manager APIs</td></tr><tr><td>Ops integration</td><td>Cross-module</td><td>gRPC config service + SQL inventory snapshots</td></tr></tbody></table><pre>\n# Python example used in workshop labs\nimport grpc\nimport psycopg\n\n# gRPC: publish latest Terraform output map\n# SQL: store tfplan drift summary for audit/retry\n</pre><div class=\"tip\"><strong>Comprehensive map:</strong> This is the baseline matrix used by module-specific troubleshooting playbooks.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s16", "moduleId": 0, "title": "Production Operations Playbook: change windows, blast-radius control, rollback, and incident triage", "content": "<h2>Production Operations Playbook: change windows, blast-radius control, rollback, and incident triage</h2><p><strong>Module:</strong> Cross-repo foundations for Terraform + Terragrunt delivery at AWS scale.</p><table><thead><tr><th>Merged Date</th><th>Repository</th><th>PR</th><th>Title</th><th>URL</th></tr></thead><tbody><tr><td>2026-02-19</td><td>terraform-aws-ecs</td><td>#400</td><td>fix: Remove `/service-role`/ from `AmazonECSInfrastructureRolePolicyForVpcLattice` ARN</td><td>https://github.com/terraform-aws-modules/terraform-aws-ecs/pull/400</td></tr><tr><td>2026-01-23</td><td>terraform-aws-iam</td><td>#634</td><td>feat: Update IAM policy for AWS Gateway API Controller to v2.0.0</td><td>https://github.com/terraform-aws-modules/terraform-aws-iam/pull/634</td></tr><tr><td>2026-01-22</td><td>terraform-aws-ecs</td><td>#393</td><td>feat: Update infrastructure IAM policy permissions with latest AWS `AmazonECSInfrastructureRolePolicyForManagedInstances` managed policy</td><td>https://github.com/terraform-aws-modules/terraform-aws-ecs/pull/393</td></tr><tr><td>2026-01-20</td><td>terraform-aws-eks</td><td>#3633</td><td>fix: Move EKS workshop banner up the README</td><td>https://github.com/terraform-aws-modules/terraform-aws-eks/pull/3633</td></tr><tr><td>2026-01-20</td><td>terraform-aws-eks</td><td>#3631</td><td>feat: Added link to AWS EKS workshops</td><td>https://github.com/terraform-aws-modules/terraform-aws-eks/pull/3631</td></tr><tr><td>2026-01-16</td><td>terraform-aws-eks</td><td>#3629</td><td>docs: Correct capabilities static example in `README.md`</td><td>https://github.com/terraform-aws-modules/terraform-aws-eks/pull/3629</td></tr><tr><td>2026-01-13</td><td>terraform-aws-ecs</td><td>#389</td><td>feat: Add support for ECS Express service</td><td>https://github.com/terraform-aws-modules/terraform-aws-ecs/pull/389</td></tr><tr><td>2026-01-08</td><td>terraform-aws-ec2-instance</td><td>#467</td><td>feat: Add provider meta user-agent</td><td>https://github.com/terraform-aws-modules/terraform-aws-ec2-instance/pull/467</td></tr><tr><td>2026-01-08</td><td>terraform-aws-iam</td><td>#632</td><td>feat: Add provider meta user-agent</td><td>https://github.com/terraform-aws-modules/terraform-aws-iam/pull/632</td></tr><tr><td>2026-01-08</td><td>terraform-aws-kms</td><td>#43</td><td>feat: Add provider meta user-agent</td><td>https://github.com/terraform-aws-modules/terraform-aws-kms/pull/43</td></tr><tr><td>2026-01-08</td><td>terraform-aws-s3-bucket</td><td>#373</td><td>feat: Add provider meta user-agent</td><td>https://github.com/terraform-aws-modules/terraform-aws-s3-bucket/pull/373</td></tr><tr><td>2026-01-08</td><td>terraform-aws-secrets-manager</td><td>#21</td><td>feat: Add provider meta user-agent</td><td>https://github.com/terraform-aws-modules/terraform-aws-secrets-manager/pull/21</td></tr><tr><td>2026-01-08</td><td>terraform-aws-vpc</td><td>#1272</td><td>feat: Add provider meta user-agent</td><td>https://github.com/terraform-aws-modules/terraform-aws-vpc/pull/1272</td></tr><tr><td>2025-12-12</td><td>terraform-aws-s3-bucket</td><td>#369</td><td>fix: Replace static `aws` partition with dynamic data source</td><td>https://github.com/terraform-aws-modules/terraform-aws-s3-bucket/pull/369</td></tr><tr><td>2025-11-26</td><td>terraform-aws-ec2-instance</td><td>#466</td><td>fix: Always pull a value from SSM data source since a computed value cannot be used in conditional logic</td><td>https://github.com/terraform-aws-modules/terraform-aws-ec2-instance/pull/466</td></tr><tr><td>2025-11-23</td><td>terraform-aws-s3-bucket</td><td>#367</td><td>feat: Support `blocked_encryption_types` and table bucket tags</td><td>https://github.com/terraform-aws-modules/terraform-aws-s3-bucket/pull/367</td></tr><tr><td>2025-11-17</td><td>terraform-aws-vpc</td><td>#1264</td><td>fix: Correction with IAM role policy associated with modules/flow-log</td><td>https://github.com/terraform-aws-modules/terraform-aws-vpc/pull/1264</td></tr><tr><td>2025-10-29</td><td>terraform-aws-iam</td><td>#628</td><td>fix: Use the `aws_service_principal` data source to retrieve the correct service principal for IRSA policies</td><td>https://github.com/terraform-aws-modules/terraform-aws-iam/pull/628</td></tr><tr><td>2025-10-22</td><td>terraform-aws-ec2-instance</td><td>#461</td><td>fix: Allow computed values for `name`, make `timeouts` dynamic/optional</td><td>https://github.com/terraform-aws-modules/terraform-aws-ec2-instance/pull/461</td></tr><tr><td>2025-10-21</td><td>terraform-aws-kms</td><td>#40</td><td>fix: Update CI workflow versions to latest</td><td>https://github.com/terraform-aws-modules/terraform-aws-kms/pull/40</td></tr></tbody></table><div class=\"real\"><strong>PR integration:</strong> Timeline pulled via `gh pr list --state merged --limit 3 --json number,title,mergedAt,url` across module repos.</div><table><thead><tr><th>Ops control</th><th>Implementation practice</th><th>Failure prevented</th></tr></thead><tbody><tr><td>Change window</td><td>Merge + plan freeze window</td><td>Unexpected blast radius</td></tr><tr><td>Rollback path</td><td>Saved plan/state and module pinning</td><td>Prolonged outage</td></tr><tr><td>Incident triage</td><td>Module-scoped logs + drift diff</td><td>Slow recovery</td></tr><tr><td>Post-incident</td><td>Quiz retry + runbook updates</td><td>Repeated operator mistakes</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform/docs</code></div>", "quiz": false}, {"id": "m0_s17", "moduleId": 0, "title": "Terraform File Naming Conventions for Team-Scale Projects", "content": "<h2>Terraform File Naming Conventions for Team-Scale Projects</h2><p><strong>Module:</strong> Foundations for maintainable HCL repositories.</p><table><thead><tr><th>File</th><th>Primary responsibility</th><th>Team benefit</th></tr></thead><tbody><tr><td><code>main.tf</code></td><td>Core resource graph and module wiring</td><td>Single place to review major infrastructure intent</td></tr><tr><td><code>variables.tf</code></td><td>Typed input contract, validation, defaults</td><td>Safer reuse across environments</td></tr><tr><td><code>outputs.tf</code></td><td>Export stable IDs/ARNs/contracts</td><td>Reliable downstream composition</td></tr><tr><td><code>providers.tf</code>/<code>versions.tf</code></td><td>Provider + Terraform version constraints</td><td>Deterministic toolchain in CI/CD</td></tr><tr><td><code>locals.tf</code> or <code>constants.tf</code></td><td>Reusable constants/derived values</td><td>Less duplication and fewer typos</td></tr></tbody></table><pre>locals {\n  naming_prefix = \"prod-core\"\n  common_tags = {\n    ManagedBy = \"Terraform\"\n    Team      = \"Platform\"\n  }\n}\n</pre><div class=\"tip\"><strong>Practical note:</strong> <code>constants.tf</code> is a naming convention, not a special Terraform file type; use it for shared locals.</div>", "quiz": false}, {"id": "m0_s18", "moduleId": 0, "title": "Terraform Repository Structure: Root Stack vs Reusable Modules", "content": "<h2>Terraform Repository Structure: Root Stack vs Reusable Modules</h2><p><strong>Module:</strong> Organizing IaC for long-term delivery speed.</p><pre>terraform-live/\n  envs/\n    prod/\n      networking/\n        main.tf\n        variables.tf\n        outputs.tf\n    staging/\n      networking/\n  modules/\n    vpc/\n      main.tf\n      variables.tf\n      outputs.tf\n    ecs-service/\n      main.tf\n      variables.tf\n      outputs.tf\n</pre><table><thead><tr><th>Layer</th><th>Contains</th><th>Rule of thumb</th></tr></thead><tbody><tr><td>Root stack</td><td>Environment wiring, remote state, module calls</td><td>Keep business/environment decisions here</td></tr><tr><td>Reusable module</td><td>Portable resource logic</td><td>Avoid account-specific hardcoding</td></tr><tr><td>Shared standards</td><td>Tags, naming, policies</td><td>Centralize via locals and module defaults</td></tr></tbody></table><div class=\"tip\"><strong>Productivity:</strong> Small root stacks + well-scoped modules reduce review time and rollout risk.</div>", "quiz": false}, {"id": "m0_s19", "moduleId": 0, "title": "Terragrunt Structure for Multi-Account, Multi-Region AWS Estates", "content": "<h2>Terragrunt Structure for Multi-Account, Multi-Region AWS Estates</h2><p><strong>Module:</strong> DRY composition with predictable account boundaries.</p><pre>live/\n  root.hcl\n  prod/\n    account-a/\n      us-east-1/\n        network/vpc/terragrunt.hcl\n        compute/eks/terragrunt.hcl\n    account-b/\n      us-west-2/\n        network/vpc/terragrunt.hcl\n  stage/\n    account-a/\n      us-east-1/\n        network/vpc/terragrunt.hcl\n</pre><pre># child terragrunt.hcl\ninclude \"root\" {\n  path = find_in_parent_folders(\"root.hcl\")\n}\n\ndependency \"vpc\" {\n  config_path = \"../network/vpc\"\n}\n</pre><div class=\"diagram\">root.hcl defaults -&gt; account overlays -&gt; region/env stack -&gt; module inputs</div><div class=\"tip\"><strong>Pattern:</strong> keep remote state/provider defaults in parent config; keep stack-specific inputs in child config.</div>", "quiz": false}, {"id": "m0_s20", "moduleId": 0, "title": "Data Sources vs Managed Resources: What Terraform Reads vs Owns", "content": "<h2>Data Sources vs Managed Resources: What Terraform Reads vs Owns</h2><p><strong>Module:</strong> Correctly modeling ownership boundaries in HCL.</p><table><thead><tr><th>Block type</th><th>Purpose</th><th>Typical use</th></tr></thead><tbody><tr><td><code>data</code></td><td>Read existing external state</td><td>Account ID, AMI lookup, policy docs</td></tr><tr><td><code>resource</code></td><td>Create/update/destroy infrastructure</td><td>VPC, IAM role, EKS cluster</td></tr></tbody></table><pre>data \"aws_caller_identity\" \"current\" {}\n\nresource \"aws_iam_role\" \"app\" {\n  name = \"app-role-${data.aws_caller_identity.current.account_id}\"\n}\n</pre><div class=\"warn\"><strong>Troubleshooting:</strong> do not model externally-owned shared infrastructure as managed resources unless your team owns its lifecycle.</div>", "quiz": false}, {"id": "m0_s21", "moduleId": 0, "title": "HCL Function Toolkit: `length`, `merge`, `coalesce`, `try`, `lookup`, `flatten`", "content": "<h2>HCL Function Toolkit: <code>length</code>, <code>merge</code>, <code>coalesce</code>, <code>try</code>, <code>lookup</code>, <code>flatten</code></h2><p><strong>Module:</strong> Safer and more expressive Terraform code for large repos.</p><pre>locals {\n  merged_tags   = merge(var.global_tags, var.service_tags)\n  az_count      = length(var.azs)\n  owner         = coalesce(var.owner, \"platform\")\n  endpoint_mode = try(var.network.endpoint_mode, \"private\")\n  tier          = lookup(var.labels, \"tier\", \"backend\")\n  subnet_ids    = flatten([var.private_subnets, var.intra_subnets])\n}\n</pre><table><thead><tr><th>Function</th><th>Use case</th><th>Common mistake to avoid</th></tr></thead><tbody><tr><td><code>merge</code></td><td>Combine maps (for tags/settings)</td><td>Overwriting keys unintentionally</td></tr><tr><td><code>length</code></td><td>Collection sizing for loops/validation</td><td>Assuming non-null input</td></tr><tr><td><code>try</code></td><td>Fallback for optional nested attrs</td><td>Masking real config errors too broadly</td></tr><tr><td><code>flatten</code></td><td>Collapse nested lists</td><td>Mixing non-list values</td></tr></tbody></table><div class=\"tip\"><strong>Productivity:</strong> standardized function patterns cut repetitive boilerplate in multi-account stacks.</div>", "quiz": false}, {"id": "m0_quiz", "moduleId": 0, "title": "Quiz: Terraform + Terragrunt + HCL Foundations", "content": "", "quiz": true}, {"id": "m1_s1", "moduleId": 1, "title": "EC2 Module Scope and Workshop Context", "content": "<h2>EC2 Module Scope and Workshop Context</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-ec2-instance\n  -&gt; resource node: aws_instance.this\n  -&gt; data hydration: aws_availability_zones.available\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_instance\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: create\n# output: id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_instance.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s2", "moduleId": 1, "title": "Repository Tour and File Topology", "content": "<h2>Repository Tour and File Topology</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_instance\" \"ignore_ami\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: name\n# output: arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_instance.ignore_ami</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s3", "moduleId": 1, "title": "Root `main.tf` Composition and Creation Flags", "content": "<h2>Root `main.tf` Composition and Creation Flags</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_spot_instance_request\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ssm_parameter\" \"this\" {}\n\n# Trait focus\n# variable: region\n# output: capacity_reservation_specification\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_spot_instance_request.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ssm_parameter.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s4", "moduleId": 1, "title": "AMI Selection Paths (`ami`, `ami_ssm_parameter`, ignore changes)", "content": "<h2>AMI Selection Paths (`ami`, `ami_ssm_parameter`, ignore changes)</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>ami</td><td>ami_ssm_parameter</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/variables.tf</td></tr><tr><td>Outputs</td><td>instance_state</td><td>outpost_arn</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/outputs.tf</td></tr><tr><td>Examples</td><td>session-manager</td><td>session-manager</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/examples/complete/main.tf</td></tr><tr><td>Wrappers</td><td>versions.tf</td><td>outputs.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/wrappers/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_ec2_tag\" \"spot_instance\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"assume_role_policy\" {}\n\n# Trait focus\n# variable: ami\n# output: instance_state\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_ec2_tag.spot_instance</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.assume_role_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s5", "moduleId": 1, "title": "Instance Lifecycle Controls and Shutdown Behavior", "content": "<h2>Instance Lifecycle Controls and Shutdown Behavior</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_ebs_volume\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_subnet\" \"this\" {}\n\n# Trait focus\n# variable: ami_ssm_parameter\n# output: outpost_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_ebs_volume.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_subnet.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s6", "moduleId": 1, "title": "Capacity Reservations and Placement Strategies", "content": "<h2>Capacity Reservations and Placement Strategies</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_volume_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ami\" \"amazon_linux\" {}\n\n# Trait focus\n# variable: ignore_ami_changes\n# output: password_data\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_volume_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ami.amazon_linux</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s7", "moduleId": 1, "title": "Spot Instance Request Flow and Tagging", "content": "<h2>Spot Instance Request Flow and Tagging</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_iam_role\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: associate_public_ip_address\n# output: primary_network_interface_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s8", "moduleId": 1, "title": "Block Device and EBS Volume Attachment Patterns", "content": "<h2>Block Device and EBS Volume Attachment Patterns</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-ec2-instance\n  -&gt; resource node: aws_iam_role_policy_attachment.this\n  -&gt; data hydration: aws_partition.current\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_iam_role_policy_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: availability_zone\n# output: private_dns\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s9", "moduleId": 1, "title": "IAM Role, Policy Attachments, and Instance Profile Wiring", "content": "<h2>IAM Role, Policy Attachments, and Instance Profile Wiring</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_instance\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ssm_parameter\" \"this\" {}\n\n# Trait focus\n# variable: capacity_reservation_specification\n# output: public_dns\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_instance.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ssm_parameter.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s10", "moduleId": 1, "title": "Security Group Creation and Rule Modeling", "content": "<h2>Security Group Creation and Rule Modeling</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>cpu_options</td><td>cpu_credits</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/variables.tf</td></tr><tr><td>Outputs</td><td>public_ip</td><td>private_ip</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/outputs.tf</td></tr><tr><td>Examples</td><td>session-manager</td><td>session-manager</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/examples/complete/main.tf</td></tr><tr><td>Wrappers</td><td>outputs.tf</td><td>versions.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance/wrappers/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_instance\" \"ignore_ami\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"assume_role_policy\" {}\n\n# Trait focus\n# variable: cpu_options\n# output: public_ip\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_instance.ignore_ami</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.assume_role_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s11", "moduleId": 1, "title": "Elastic IP, Network Interface, and Subnet Interactions", "content": "<h2>Elastic IP, Network Interface, and Subnet Interactions</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_spot_instance_request\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_subnet\" \"this\" {}\n\n# Trait focus\n# variable: cpu_credits\n# output: private_ip\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_spot_instance_request.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_subnet.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s12", "moduleId": 1, "title": "Metadata Options, IMDS Hardening, and Monitoring", "content": "<h2>Metadata Options, IMDS Hardening, and Monitoring</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_ec2_tag\" \"spot_instance\" {\n  tags = var.tags\n}\n\ndata \"aws_ami\" \"amazon_linux\" {}\n\n# Trait focus\n# variable: disable_api_termination\n# output: ipv6_addresses\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_ec2_tag.spot_instance</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ami.amazon_linux</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s13", "moduleId": 1, "title": "Variable Design Patterns in `variables.tf`", "content": "<h2>Variable Design Patterns in `variables.tf`</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_ebs_volume\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: disable_api_stop\n# output: tags_all\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_ebs_volume.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s14", "moduleId": 1, "title": "Output Contract Design in `outputs.tf`", "content": "<h2>Output Contract Design in `outputs.tf`</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_volume_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: ebs_optimized\n# output: spot_bid_status\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_volume_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s15", "moduleId": 1, "title": "Example Deep Dive: `examples/complete`", "content": "<h2>Example Deep Dive: `examples/complete`</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_iam_role\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ssm_parameter\" \"this\" {}\n\n# Trait focus\n# variable: enclave_options_enabled\n# output: spot_request_state\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ssm_parameter.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-3.0.md, docs/UPGRADE-6.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_s16", "moduleId": 1, "title": "Example Deep Dive: `examples/session-manager` + Wrapper Usage", "content": "<h2>Example Deep Dive: `examples/session-manager` + Wrapper Usage</h2><p><strong>Module:</strong> <code>terraform-aws-ec2-instance</code></p><pre>\n# Representative sketch from terraform-aws-ec2-instance\nresource \"aws_iam_role_policy_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"assume_role_policy\" {}\n\n# Trait focus\n# variable: enable_primary_ipv6\n# output: spot_instance_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.assume_role_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>session-manager</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-3.0.md, docs/UPGRADE-6.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ec2-instance</code></div>", "quiz": false}, {"id": "m1_quiz", "moduleId": 1, "title": "Quiz: EC2 Instance Module", "content": "", "quiz": true}, {"id": "m2_s1", "moduleId": 2, "title": "ECS Module Architecture and Submodule Map", "content": "<h2>ECS Module Architecture and Submodule Map</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-ecs\n  -&gt; resource node: aws_cloudwatch_log_group.this\n  -&gt; data hydration: aws_availability_zones.available\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_cloudwatch_log_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: create\n# output: cluster_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_cloudwatch_log_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>cluster</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s2", "moduleId": 2, "title": "Root Module Split: Cluster + Service Composition", "content": "<h2>Root Module Split: Cluster + Service Composition</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_security_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: region\n# output: cluster_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>container-definition</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>container-definition</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s3", "moduleId": 2, "title": "Cluster Resource Graph (`aws_ecs_cluster`, capacity providers)", "content": "<h2>Cluster Resource Graph (`aws_ecs_cluster`, capacity providers)</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_vpc_security_group_ingress_rule\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: tags\n# output: cluster_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_security_group_ingress_rule.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>ec2-autoscaling</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>express-service</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s4", "moduleId": 2, "title": "Cluster CloudWatch Log Group Strategy", "content": "<h2>Cluster CloudWatch Log Group Strategy</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>disable_v7_default_name_description</td><td>cluster_configuration</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/modules/cluster/main.tf</td></tr><tr><td>Outputs</td><td>cloudwatch_log_group_name</td><td>cloudwatch_log_group_arn</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/modules/service/main.tf</td></tr><tr><td>Examples</td><td>express-service</td><td>managed-instances</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/modules/container-definition/main.tf</td></tr><tr><td>Wrappers</td><td>main.tf</td><td>service</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/examples/ec2-autoscaling/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_vpc_security_group_egress_rule\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ssm_parameter\" \"fluentbit\" {}\n\n# Trait focus\n# variable: disable_v7_default_name_description\n# output: cloudwatch_log_group_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_security_group_egress_rule.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ssm_parameter.fluentbit</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>express-service</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s5", "moduleId": 2, "title": "Cluster IAM Roles: Task Exec, Infrastructure, Node", "content": "<h2>Cluster IAM Roles: Task Exec, Infrastructure, Node</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_service_discovery_http_namespace\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ssm_parameter\" \"ecs_optimized_ami\" {}\n\n# Trait focus\n# variable: cluster_configuration\n# output: cloudwatch_log_group_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_service_discovery_http_namespace.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ssm_parameter.ecs_optimized_ami</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>fargate</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s6", "moduleId": 2, "title": "Service Submodule: ECS Service and Task Definition Flow", "content": "<h2>Service Submodule: ECS Service and Task Definition Flow</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_iam_role\" \"task_exec\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: cluster_name\n# output: cluster_capacity_providers\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.task_exec</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>managed-instances</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>service</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s7", "moduleId": 2, "title": "Task Execution Role and Task Role Policy Construction", "content": "<h2>Task Execution Role and Task Role Policy Construction</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_iam_role_policy_attachment\" \"task_exec_additional\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"task_exec_assume\" {}\n\n# Trait focus\n# variable: cluster_service_connect_defaults\n# output: capacity_providers\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.task_exec_additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.task_exec_assume</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s8", "moduleId": 2, "title": "Autoscaling Targets, Policies, and Scheduled Actions", "content": "<h2>Autoscaling Targets, Policies, and Scheduled Actions</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-ecs\n  -&gt; resource node: aws_iam_policy.task_exec\n  -&gt; data hydration: aws_iam_policy_document.task_exec\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_iam_policy\" \"task_exec\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"task_exec\" {}\n\n# Trait focus\n# variable: cluster_setting\n# output: task_exec_iam_role_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.task_exec</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.task_exec</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>container-definition</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s9", "moduleId": 2, "title": "Security Groups for ECS Services and Ingress Models", "content": "<h2>Security Groups for ECS Services and Ingress Models</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_cloudwatch_log_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: cluster_tags\n# output: task_exec_iam_role_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_cloudwatch_log_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>ec2-autoscaling</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>cluster</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s10", "moduleId": 2, "title": "Container Definition Module and Logging Contracts", "content": "<h2>Container Definition Module and Logging Contracts</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>create_cloudwatch_log_group</td><td>cloudwatch_log_group_name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/modules/cluster/main.tf</td></tr><tr><td>Outputs</td><td>task_exec_iam_role_unique_id</td><td>infrastructure_iam_role_arn</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/modules/service/main.tf</td></tr><tr><td>Examples</td><td>express-service</td><td>managed-instances</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/modules/container-definition/main.tf</td></tr><tr><td>Wrappers</td><td>container-definition</td><td>main.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-ecs/examples/ec2-autoscaling/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_security_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: create_cloudwatch_log_group\n# output: task_exec_iam_role_unique_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>express-service</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>container-definition</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s11", "moduleId": 2, "title": "Express Service Module Capabilities and IAM Design", "content": "<h2>Express Service Module Capabilities and IAM Design</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_vpc_security_group_ingress_rule\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: cloudwatch_log_group_name\n# output: infrastructure_iam_role_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_security_group_ingress_rule.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>fargate</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>express-service</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s12", "moduleId": 2, "title": "Fargate Example Walkthrough", "content": "<h2>Fargate Example Walkthrough</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_vpc_security_group_egress_rule\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ssm_parameter\" \"fluentbit\" {}\n\n# Trait focus\n# variable: cloudwatch_log_group_retention_in_days\n# output: infrastructure_iam_role_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_security_group_egress_rule.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ssm_parameter.fluentbit</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>managed-instances</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s13", "moduleId": 2, "title": "EC2 Autoscaling Example Walkthrough", "content": "<h2>EC2 Autoscaling Example Walkthrough</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_service_discovery_http_namespace\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ssm_parameter\" \"ecs_optimized_ami\" {}\n\n# Trait focus\n# variable: cloudwatch_log_group_kms_key_id\n# output: infrastructure_iam_role_unique_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_service_discovery_http_namespace.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ssm_parameter.ecs_optimized_ami</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s14", "moduleId": 2, "title": "Variables and Outputs API Surface for ECS", "content": "<h2>Variables and Outputs API Surface for ECS</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_iam_role\" \"task_exec\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: cloudwatch_log_group_class\n# output: node_iam_role_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.task_exec</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>container-definition</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>service</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s15", "moduleId": 2, "title": "Upgrade Strategy and Breaking Change Awareness", "content": "<h2>Upgrade Strategy and Breaking Change Awareness</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_iam_role_policy_attachment\" \"task_exec_additional\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"task_exec_assume\" {}\n\n# Trait focus\n# variable: cloudwatch_log_group_tags\n# output: node_iam_role_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.task_exec_additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.task_exec_assume</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>ec2-autoscaling</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/README.md, docs/UPGRADE-4.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_s16", "moduleId": 2, "title": "Wrapper Modules and Multi-Environment Usage", "content": "<h2>Wrapper Modules and Multi-Environment Usage</h2><p><strong>Module:</strong> <code>terraform-aws-ecs</code></p><pre>\n# Representative sketch from terraform-aws-ecs\nresource \"aws_iam_policy\" \"task_exec\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"task_exec\" {}\n\n# Trait focus\n# variable: cluster_capacity_providers\n# output: node_iam_role_unique_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.task_exec</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.task_exec</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>express-service</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/README.md, docs/UPGRADE-4.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-ecs</code></div>", "quiz": false}, {"id": "m2_quiz", "moduleId": 2, "title": "Quiz: ECS Module", "content": "", "quiz": true}, {"id": "m3_s1", "moduleId": 3, "title": "EKS Module Big Picture and Feature Surface", "content": "<h2>EKS Module Big Picture and Feature Surface</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-eks\n  -&gt; resource node: aws_iam_role.this\n  -&gt; data hydration: aws_availability_zones.available\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: create\n# output: cluster_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-auto-mode</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s2", "moduleId": 3, "title": "Cluster Core Resources (`aws_eks_cluster`, logs, access)", "content": "<h2>Cluster Core Resources (`aws_eks_cluster`, logs, access)</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role_policy_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: prefix_separator\n# output: cluster_certificate_authority_data\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-capabilities</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s3", "moduleId": 3, "title": "Access Entries and Policy Association Model", "content": "<h2>Access Entries and Policy Association Model</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role_policy_attachment\" \"additional\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: region\n# output: cluster_endpoint\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-hybrid-nodes</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s4", "moduleId": 3, "title": "Cluster Security Group and Control Plane Network", "content": "<h2>Cluster Security Group and Control Plane Network</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>tags</td><td>name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/node_groups.tf</td></tr><tr><td>Outputs</td><td>cluster_id</td><td>cluster_name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/modules/eks-managed-node-group/main.tf</td></tr><tr><td>Examples</td><td>eks-managed-node-group</td><td>self-managed-node-group</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/modules/self-managed-node-group/main.tf</td></tr><tr><td>Wrappers</td><td>main.tf</td><td>main.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/docs/user_data.md</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role_policy\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"assume_role_policy\" {}\n\n# Trait focus\n# variable: tags\n# output: cluster_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.assume_role_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-managed-node-group</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s5", "moduleId": 3, "title": "OIDC Provider Provisioning and IAM Integration", "content": "<h2>OIDC Provider Provisioning and IAM Integration</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_eks_access_entry\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"role\" {}\n\n# Trait focus\n# variable: name\n# output: cluster_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_eks_access_entry.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.role</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>karpenter</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s6", "moduleId": 3, "title": "Add-on Management and Before/After Compute Ordering", "content": "<h2>Add-on Management and Before/After Compute Ordering</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"time_sleep\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ami\" \"eks_default\" {}\n\n# Trait focus\n# variable: kubernetes_version\n# output: cluster_oidc_issuer_url\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>time_sleep.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ami.eks_default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>self-managed-node-group</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s7", "moduleId": 3, "title": "`node_groups.tf` Orchestration and Wait Semantics", "content": "<h2>`node_groups.tf` Orchestration and Wait Semantics</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_policy\" \"additional\" {\n  tags = var.tags\n}\n\ndata \"aws_ami\" \"eks_default_bottlerocket\" {}\n\n# Trait focus\n# variable: enabled_log_types\n# output: cluster_dualstack_oidc_issuer_url\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ami.eks_default_bottlerocket</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-auto-mode</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s8", "moduleId": 3, "title": "Managed Node Group Submodule Deep Dive", "content": "<h2>Managed Node Group Submodule Deep Dive</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-eks\n  -&gt; resource node: aws_iam_instance_profile.this\n  -&gt; data hydration: aws_region.current\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_instance_profile\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: deletion_protection\n# output: cluster_version\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_instance_profile.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-capabilities</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s9", "moduleId": 3, "title": "Self-Managed Node Group Submodule Deep Dive", "content": "<h2>Self-Managed Node Group Submodule Deep Dive</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: force_update_version\n# output: cluster_platform_version\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-hybrid-nodes</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s10", "moduleId": 3, "title": "Fargate Profile Submodule Deep Dive", "content": "<h2>Fargate Profile Submodule Deep Dive</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>authentication_mode</td><td>compute_config</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/node_groups.tf</td></tr><tr><td>Outputs</td><td>cluster_status</td><td>cluster_primary_security_group_id</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/modules/eks-managed-node-group/main.tf</td></tr><tr><td>Examples</td><td>eks-managed-node-group</td><td>self-managed-node-group</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/modules/self-managed-node-group/main.tf</td></tr><tr><td>Wrappers</td><td>main.tf</td><td>main.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-eks/docs/user_data.md</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role_policy_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: authentication_mode\n# output: cluster_status\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-managed-node-group</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s11", "moduleId": 3, "title": "Karpenter Submodule (SQS, events, IAM, pod identity)", "content": "<h2>Karpenter Submodule (SQS, events, IAM, pod identity)</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role_policy_attachment\" \"additional\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: compute_config\n# output: cluster_primary_security_group_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>karpenter</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s12", "moduleId": 3, "title": "Capability Submodule and Time-Based Sequencing", "content": "<h2>Capability Submodule and Time-Based Sequencing</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_role_policy\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"assume_role_policy\" {}\n\n# Trait focus\n# variable: control_plane_scaling_config\n# output: cluster_service_cidr\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.assume_role_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>self-managed-node-group</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s13", "moduleId": 3, "title": "Hybrid Node Role and Roles Anywhere Pattern", "content": "<h2>Hybrid Node Role and Roles Anywhere Pattern</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_eks_access_entry\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"role\" {}\n\n# Trait focus\n# variable: upgrade_policy\n# output: cluster_ip_family\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_eks_access_entry.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.role</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-auto-mode</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s14", "moduleId": 3, "title": "User Data Generation Paths (`modules/_user_data`)", "content": "<h2>User Data Generation Paths (`modules/_user_data`)</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"time_sleep\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_ami\" \"eks_default\" {}\n\n# Trait focus\n# variable: remote_network_config\n# output: cluster_control_plane_scaling_tier\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>time_sleep.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ami.eks_default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-capabilities</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s15", "moduleId": 3, "title": "Network Connectivity and Security Guidance from docs", "content": "<h2>Network Connectivity and Security Guidance from docs</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_policy\" \"additional\" {\n  tags = var.tags\n}\n\ndata \"aws_ami\" \"eks_default_bottlerocket\" {}\n\n# Trait focus\n# variable: zonal_shift_config\n# output: access_entries\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_ami.eks_default_bottlerocket</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-hybrid-nodes</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/CHANGELOG.pre-v11.0.0.md, docs/README.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_s16", "moduleId": 3, "title": "Upgrade and Migration Traps Across Major Versions", "content": "<h2>Upgrade and Migration Traps Across Major Versions</h2><p><strong>Module:</strong> <code>terraform-aws-eks</code></p><pre>\n# Representative sketch from terraform-aws-eks\nresource \"aws_iam_instance_profile\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: additional_security_group_ids\n# output: access_policy_associations\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_instance_profile.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>eks-managed-node-group</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/CHANGELOG.pre-v11.0.0.md, docs/README.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-eks</code></div>", "quiz": false}, {"id": "m3_quiz", "moduleId": 3, "title": "Quiz: EKS Module", "content": "", "quiz": true}, {"id": "m4_s1", "moduleId": 4, "title": "IAM Module Family Overview and Consolidated Architecture", "content": "<h2>IAM Module Family Overview and Consolidated Architecture</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-iam\n  -&gt; resource node: aws_iam_policy.this\n  -&gt; data hydration: aws_partition.current\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_policy\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: defaults\n# output: wrapper\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-account</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-account</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s2", "moduleId": 4, "title": "IAM Account Module (alias + password policy)", "content": "<h2>IAM Account Module (alias + password policy)</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_role\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: items\n# output: group_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-group</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-group</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s3", "moduleId": 4, "title": "IAM Group Module and MFA-Aware Policy Conditions", "content": "<h2>IAM Group Module and MFA-Aware Policy Conditions</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_role_policy_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: create\n# output: group_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-oidc-provider</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-oidc-provider</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s4", "moduleId": 4, "title": "IAM OIDC Provider Module and TLS Certificate Data", "content": "<h2>IAM OIDC Provider Module and TLS Certificate Data</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>tags</td><td>name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-group/main.tf</td></tr><tr><td>Outputs</td><td>group_name</td><td>group_unique_id</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-oidc-provider/main.tf</td></tr><tr><td>Examples</td><td>iam-policy</td><td>iam-role</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-policy/main.tf</td></tr><tr><td>Wrappers</td><td>iam-policy</td><td>iam-role</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-user/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_role_policy\" \"inline\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"inline\" {}\n\n# Trait focus\n# variable: tags\n# output: group_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy.inline</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.inline</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-policy</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-policy</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s5", "moduleId": 4, "title": "IAM Policy Module for Custom Documents", "content": "<h2>IAM Policy Module for Custom Documents</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_policy\" \"policy\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: name\n# output: group_unique_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.policy</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-read-only-policy</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-read-only-policy</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s6", "moduleId": 4, "title": "IAM Read-Only Policy Construction", "content": "<h2>IAM Read-Only Policy Construction</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_policy\" \"additional\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"bucket_policy\" {}\n\n# Trait focus\n# variable: path\n# output: group_users\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.bucket_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-role</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-role</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s7", "moduleId": 4, "title": "IAM Role Module: Assume Role Patterns (OIDC/GitHub/SAML)", "content": "<h2>IAM Role Module: Assume Role Patterns (OIDC/GitHub/SAML)</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_saml_provider\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_service_principal\" \"elasticloadbalancing\" {}\n\n# Trait focus\n# variable: users\n# output: group_policy_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_saml_provider.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_service_principal.elasticloadbalancing</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-role-for-service-accounts</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-role-for-service-accounts</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s8", "moduleId": 4, "title": "IAM Role Inline Policies and Attachments", "content": "<h2>IAM Role Inline Policies and Attachments</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-iam\n  -&gt; resource node: aws_iam_group.this\n  -&gt; data hydration: aws_service_principal.fsx\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_service_principal\" \"fsx\" {}\n\n# Trait focus\n# variable: create_policy\n# output: group_policy_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_service_principal.fsx</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-user</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-user</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s9", "moduleId": 4, "title": "IAM Role for Service Accounts (IRSA) Internals", "content": "<h2>IAM Role for Service Accounts (IRSA) Internals</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_policy\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: enable_self_management_permissions\n# output: group_policy_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-account</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-account</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s10", "moduleId": 4, "title": "IRSA Built-in Policy Packs and Condition Traits", "content": "<h2>IRSA Built-in Policy Packs and Condition Traits</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>enable_mfa_enforcement</td><td>permissions</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-group/main.tf</td></tr><tr><td>Outputs</td><td>irsa_arn</td><td>irsa_name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-oidc-provider/main.tf</td></tr><tr><td>Examples</td><td>iam-group</td><td>iam-policy</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-policy/main.tf</td></tr><tr><td>Wrappers</td><td>iam-group</td><td>iam-policy</td><td>/Users/mohannarayanaswamy/git/terraform-aws-iam/modules/iam-user/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_role\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: enable_mfa_enforcement\n# output: irsa_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-group</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-group</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s11", "moduleId": 4, "title": "IAM User Module (login profile, access key, SSH key)", "content": "<h2>IAM User Module (login profile, access key, SSH key)</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_role_policy_attachment\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: permissions\n# output: irsa_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy_attachment.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-oidc-provider</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-oidc-provider</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s12", "moduleId": 4, "title": "Example Walkthrough: OIDC Provider + Role", "content": "<h2>Example Walkthrough: OIDC Provider + Role</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_role_policy\" \"inline\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"inline\" {}\n\n# Trait focus\n# variable: policy_name\n# output: irsa_path\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role_policy.inline</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.inline</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-policy</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-policy</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s13", "moduleId": 4, "title": "Example Walkthrough: IAM Group + IAM User", "content": "<h2>Example Walkthrough: IAM Group + IAM User</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_policy\" \"policy\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: policy_use_name_prefix\n# output: irsa_unique_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.policy</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-read-only-policy</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-read-only-policy</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s14", "moduleId": 4, "title": "Variable and Output Trait Patterns Across Modules", "content": "<h2>Variable and Output Trait Patterns Across Modules</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_policy\" \"additional\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"bucket_policy\" {}\n\n# Trait focus\n# variable: policy_description\n# output: irsa_iam_policy_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_policy.additional</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.bucket_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-role</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-role</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s15", "moduleId": 4, "title": "Wrapper Modules for Repeated Deployments", "content": "<h2>Wrapper Modules for Repeated Deployments</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_saml_provider\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_service_principal\" \"elasticloadbalancing\" {}\n\n# Trait focus\n# variable: policy_path\n# output: irsa_iam_policy\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_saml_provider.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_service_principal.elasticloadbalancing</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-role-for-service-accounts</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-role-for-service-accounts</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-6.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_s16", "moduleId": 4, "title": "Upgrade Consolidation Map and Migration Planning", "content": "<h2>Upgrade Consolidation Map and Migration Planning</h2><p><strong>Module:</strong> <code>terraform-aws-iam</code></p><pre>\n# Representative sketch from terraform-aws-iam\nresource \"aws_iam_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_service_principal\" \"fsx\" {}\n\n# Trait focus\n# variable: policies\n# output: github_oidc_iam_provider_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_service_principal.fsx</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>iam-user</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>iam-user</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-6.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-iam</code></div>", "quiz": false}, {"id": "m4_quiz", "moduleId": 4, "title": "Quiz: IAM Module", "content": "", "quiz": true}, {"id": "m5_s1", "moduleId": 5, "title": "KMS Module Scope and Key Management Strategy", "content": "<h2>KMS Module Scope and Key Management Strategy</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-kms\n  -&gt; resource node: aws_kms_key.this\n  -&gt; data hydration: aws_caller_identity.current\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: create\n# output: key_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s2", "moduleId": 5, "title": "Resource Types: Standard, External, Replica Keys", "content": "<h2>Resource Types: Standard, External, Replica Keys</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_external_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: region\n# output: key_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_external_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s3", "moduleId": 5, "title": "Key Policy Composition from Inputs and Statements", "content": "<h2>Key Policy Composition from Inputs and Statements</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_replica_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: tags\n# output: key_region\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_replica_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s4", "moduleId": 5, "title": "Key Owners, Admins, and Service User Separation", "content": "<h2>Key Owners, Admins, and Service User Separation</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>create_external</td><td>bypass_policy_lockout_safety_check</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/variables.tf</td></tr><tr><td>Outputs</td><td>key_policy</td><td>external_key_expiration_model</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/outputs.tf</td></tr><tr><td>Examples</td><td>complete</td><td>complete</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/examples/complete/main.tf</td></tr><tr><td>Wrappers</td><td>versions.tf</td><td>outputs.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/examples/complete/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_replica_external_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: create_external\n# output: key_policy\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_replica_external_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s5", "moduleId": 5, "title": "Alias Management and Naming Patterns", "content": "<h2>Alias Management and Naming Patterns</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_alias\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: bypass_policy_lockout_safety_check\n# output: external_key_expiration_model\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_alias.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s6", "moduleId": 5, "title": "Grant Management and Grant Trait Modeling", "content": "<h2>Grant Management and Grant Trait Modeling</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_grant\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: customer_master_key_spec\n# output: external_key_state\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_grant.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s7", "moduleId": 5, "title": "Multi-Region Key Replication Design", "content": "<h2>Multi-Region Key Replication Design</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_iam_role\" \"lambda\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: custom_key_store_id\n# output: external_key_usage\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.lambda</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s8", "moduleId": 5, "title": "External Key Material Workflow and Validity Windows", "content": "<h2>External Key Material Workflow and Validity Windows</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-kms\n  -&gt; resource node: aws_kms_key.this\n  -&gt; data hydration: aws_partition.current\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: deletion_window_in_days\n# output: aliases\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s9", "moduleId": 5, "title": "Route53 DNSSEC Support Flow", "content": "<h2>Route53 DNSSEC Support Flow</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_external_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: description\n# output: grants\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_external_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s10", "moduleId": 5, "title": "Autoscaling Service Role Integration", "content": "<h2>Autoscaling Service Role Integration</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>enable_key_rotation</td><td>is_enabled</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/variables.tf</td></tr><tr><td>Outputs</td><td>wrapper</td><td>complete_key_arn</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/outputs.tf</td></tr><tr><td>Examples</td><td>complete</td><td>complete</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/examples/complete/main.tf</td></tr><tr><td>Wrappers</td><td>outputs.tf</td><td>versions.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-kms/examples/complete/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_replica_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: enable_key_rotation\n# output: wrapper\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_replica_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s11", "moduleId": 5, "title": "Variable Traits: Rotation, Deletion Window, Key Usage", "content": "<h2>Variable Traits: Rotation, Deletion Window, Key Usage</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_replica_external_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: is_enabled\n# output: complete_key_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_replica_external_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s12", "moduleId": 5, "title": "Data Source Usage (`aws_partition`, `aws_caller_identity`)", "content": "<h2>Data Source Usage (`aws_partition`, `aws_caller_identity`)</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_alias\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: key_material_base64\n# output: complete_key_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_alias.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s13", "moduleId": 5, "title": "Output Contract and Downstream Consumption", "content": "<h2>Output Contract and Downstream Consumption</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_grant\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: key_usage\n# output: complete_key_policy\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_grant.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s14", "moduleId": 5, "title": "Example: Complete KMS Deployment Walkthrough", "content": "<h2>Example: Complete KMS Deployment Walkthrough</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_iam_role\" \"lambda\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: multi_region\n# output: complete_external_key_expiration_model\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_iam_role.lambda</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s15", "moduleId": 5, "title": "Failure Modes and Safe Policy Design", "content": "<h2>Failure Modes and Safe Policy Design</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: policy\n# output: complete_external_key_state\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-4.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_s16", "moduleId": 5, "title": "Upgrade Notes and State Migration Considerations", "content": "<h2>Upgrade Notes and State Migration Considerations</h2><p><strong>Module:</strong> <code>terraform-aws-kms</code></p><pre>\n# Representative sketch from terraform-aws-kms\nresource \"aws_kms_external_key\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: valid_to\n# output: complete_external_key_usage\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_external_key.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-4.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-kms</code></div>", "quiz": false}, {"id": "m5_quiz", "moduleId": 5, "title": "Quiz: KMS Module", "content": "", "quiz": true}, {"id": "m6_s1", "moduleId": 6, "title": "S3 Module Surface Area and Multi-Mode Buckets", "content": "<h2>S3 Module Surface Area and Multi-Mode Buckets</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-s3-bucket\n  -&gt; resource node: random_pet.this\n  -&gt; data hydration: aws_caller_identity.current\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"random_pet\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: create_bucket\n# output: s3_bucket_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>random_pet.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>account-public-access</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>account-public-access</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s2", "moduleId": 6, "title": "Core Bucket Resource and Conditional Creation Logic", "content": "<h2>Core Bucket Resource and Conditional Creation Logic</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_kms_key\" \"objects\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"bucket_policy\" {}\n\n# Trait focus\n# variable: attach_elb_log_delivery_policy\n# output: s3_bucket_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_key.objects</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.bucket_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s3", "moduleId": 6, "title": "Directory Bucket and Table Bucket Paths", "content": "<h2>Directory Bucket and Table Bucket Paths</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: attach_lb_log_delivery_policy\n# output: s3_bucket_bucket_domain_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>directory-bucket</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>notification</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s4", "moduleId": 6, "title": "ACL, Ownership Controls, and Public Access Blocks", "content": "<h2>ACL, Ownership Controls, and Public Access Blocks</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>attach_access_log_delivery_policy</td><td>attach_cloudtrail_log_delivery_policy</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/modules/account-public-access/main.tf</td></tr><tr><td>Outputs</td><td>s3_bucket_bucket_regional_domain_name</td><td>s3_bucket_hosted_zone_id</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/modules/notification/main.tf</td></tr><tr><td>Examples</td><td>notification</td><td>s3-analytics</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/modules/object/main.tf</td></tr><tr><td>Wrappers</td><td>object</td><td>table-bucket</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/examples/notification/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_directory_bucket\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_canonical_user_id\" \"this\" {}\n\n# Trait focus\n# variable: attach_access_log_delivery_policy\n# output: s3_bucket_bucket_regional_domain_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_directory_bucket.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_canonical_user_id.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>notification</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>object</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s5", "moduleId": 6, "title": "Versioning, Encryption, and Object Lock Controls", "content": "<h2>Versioning, Encryption, and Object Lock Controls</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_logging\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: attach_cloudtrail_log_delivery_policy\n# output: s3_bucket_hosted_zone_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_logging.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>object</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s6", "moduleId": 6, "title": "Lifecycle, Intelligent Tiering, and Metrics Configuration", "content": "<h2>Lifecycle, Intelligent Tiering, and Metrics Configuration</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_acl\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"combined\" {}\n\n# Trait focus\n# variable: attach_deny_insecure_transport_policy\n# output: s3_bucket_lifecycle_configuration_rules\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_acl.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.combined</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>s3-analytics</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>table-bucket</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s7", "moduleId": 6, "title": "Replication Configuration and Cross-Bucket Dependencies", "content": "<h2>Replication Configuration and Cross-Bucket Dependencies</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_website_configuration\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"elb_log_delivery\" {}\n\n# Trait focus\n# variable: attach_require_latest_tls_policy\n# output: s3_bucket_policy\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_website_configuration.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.elb_log_delivery</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>s3-inventory</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s8", "moduleId": 6, "title": "Logging, Request Payer, and Access Log Delivery Policies", "content": "<h2>Logging, Request Payer, and Access Log Delivery Policies</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-s3-bucket\n  -&gt; resource node: aws_s3_bucket_versioning.this\n  -&gt; data hydration: aws_iam_policy_document.lb_log_delivery\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_versioning\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"lb_log_delivery\" {}\n\n# Trait focus\n# variable: attach_policy\n# output: s3_bucket_region\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_versioning.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.lb_log_delivery</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>s3-replication</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s9", "moduleId": 6, "title": "Policy Assembly (`combined` and deny policies)", "content": "<h2>Policy Assembly (`combined` and deny policies)</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"random_pet\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: attach_public_policy\n# output: s3_bucket_website_endpoint\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>random_pet.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>table-bucket</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>account-public-access</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s10", "moduleId": 6, "title": "Notification Submodule (Lambda, SQS, SNS permissions)", "content": "<h2>Notification Submodule (Lambda, SQS, SNS permissions)</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>attach_inventory_destination_policy</td><td>attach_analytics_destination_policy</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/modules/account-public-access/main.tf</td></tr><tr><td>Outputs</td><td>s3_bucket_website_domain</td><td>s3_directory_bucket_name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/modules/notification/main.tf</td></tr><tr><td>Examples</td><td>account-public-access</td><td>directory-bucket</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/modules/object/main.tf</td></tr><tr><td>Wrappers</td><td>main.tf</td><td>object</td><td>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket/examples/notification/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_kms_key\" \"objects\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"bucket_policy\" {}\n\n# Trait focus\n# variable: attach_inventory_destination_policy\n# output: s3_bucket_website_domain\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_kms_key.objects</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.bucket_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>account-public-access</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s11", "moduleId": 6, "title": "Object Submodule and Object-Level Delivery Traits", "content": "<h2>Object Submodule and Object-Level Delivery Traits</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: attach_analytics_destination_policy\n# output: s3_directory_bucket_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>notification</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s12", "moduleId": 6, "title": "Account Public Access Submodule Behavior", "content": "<h2>Account Public Access Submodule Behavior</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_directory_bucket\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_canonical_user_id\" \"this\" {}\n\n# Trait focus\n# variable: attach_deny_incorrect_encryption_headers\n# output: s3_directory_bucket_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_directory_bucket.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_canonical_user_id.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>directory-bucket</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>object</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s13", "moduleId": 6, "title": "Table Bucket Submodule and S3 Tables Resources", "content": "<h2>Table Bucket Submodule and S3 Tables Resources</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_logging\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: attach_deny_incorrect_kms_key_sse\n# output: aws_s3_bucket_versioning_status\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_logging.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>notification</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s14", "moduleId": 6, "title": "Example Deep Dive: Replication + Notification Patterns", "content": "<h2>Example Deep Dive: Replication + Notification Patterns</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_acl\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"combined\" {}\n\n# Trait focus\n# variable: allowed_kms_key_arn\n# output: s3_bucket_tags\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_acl.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.combined</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>object</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>table-bucket</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s15", "moduleId": 6, "title": "Variable Traits and Defensive Defaults", "content": "<h2>Variable Traits and Defensive Defaults</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_website_configuration\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"elb_log_delivery\" {}\n\n# Trait focus\n# variable: attach_deny_unencrypted_object_uploads\n# output: wrapper\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_website_configuration.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.elb_log_delivery</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>s3-analytics</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-3.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_s16", "moduleId": 6, "title": "Upgrade and Import Migration Considerations", "content": "<h2>Upgrade and Import Migration Considerations</h2><p><strong>Module:</strong> <code>terraform-aws-s3-bucket</code></p><pre>\n# Representative sketch from terraform-aws-s3-bucket\nresource \"aws_s3_bucket_versioning\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"lb_log_delivery\" {}\n\n# Trait focus\n# variable: attach_deny_ssec_encrypted_object_uploads\n# output: s3_account_public_access_block_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_s3_bucket_versioning.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.lb_log_delivery</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>s3-inventory</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-3.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-s3-bucket</code></div>", "quiz": false}, {"id": "m6_quiz", "moduleId": 6, "title": "Quiz: S3 Bucket Module", "content": "", "quiz": true}, {"id": "m7_s1", "moduleId": 7, "title": "Secrets Manager Module Purpose and Scope", "content": "<h2>Secrets Manager Module Purpose and Scope</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-secrets-manager\n  -&gt; resource node: aws_secretsmanager_secret.this\n  -&gt; data hydration: aws_iam_policy_document.this\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: create\n# output: secret_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s2", "moduleId": 7, "title": "Secret Resource Creation and Naming Patterns", "content": "<h2>Secret Resource Creation and Naming Patterns</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_policy\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: region\n# output: secret_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_policy.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s3", "moduleId": 7, "title": "Secret Policy Construction with IAM Policy Documents", "content": "<h2>Secret Policy Construction with IAM Policy Documents</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_version\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: tags\n# output: secret_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_version.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s4", "moduleId": 7, "title": "Secret Version Strategies (`normal` vs `ignore_changes`)", "content": "<h2>Secret Version Strategies (`normal` vs `ignore_changes`)</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>description</td><td>force_overwrite_replica_secret</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/variables.tf</td></tr><tr><td>Outputs</td><td>secret_replica</td><td>secret_string</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/outputs.tf</td></tr><tr><td>Examples</td><td>complete</td><td>complete</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/examples/complete/main.tf</td></tr><tr><td>Wrappers</td><td>versions.tf</td><td>outputs.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/outputs.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_version\" \"ignore_changes\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: description\n# output: secret_replica\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_version.ignore_changes</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s5", "moduleId": 7, "title": "Secret String, Binary, and Write-Only Traits", "content": "<h2>Secret String, Binary, and Write-Only Traits</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_rotation\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: force_overwrite_replica_secret\n# output: secret_string\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_rotation.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s6", "moduleId": 7, "title": "Random Password Generation Controls", "content": "<h2>Random Password Generation Controls</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: kms_key_id\n# output: secret_binary\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s7", "moduleId": 7, "title": "KMS Key Integration and Encryption Boundaries", "content": "<h2>KMS Key Integration and Encryption Boundaries</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_policy\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: name\n# output: secret_version_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_policy.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s8", "moduleId": 7, "title": "Rotation Enablement and Lambda Rotation Wiring", "content": "<h2>Rotation Enablement and Lambda Rotation Wiring</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-secrets-manager\n  -&gt; resource node: aws_secretsmanager_secret_version.this\n  -&gt; data hydration: aws_caller_identity.current\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_version\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: name_prefix\n# output: wrapper\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_version.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s9", "moduleId": 7, "title": "Replica Configuration and Recovery Windows", "content": "<h2>Replica Configuration and Recovery Windows</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_version\" \"ignore_changes\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: recovery_window_in_days\n# output: standard_secret_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_version.ignore_changes</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s10", "moduleId": 7, "title": "Block Public Policy and Guardrails", "content": "<h2>Block Public Policy and Guardrails</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>replica</td><td>create_policy</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/variables.tf</td></tr><tr><td>Outputs</td><td>standard_secret_id</td><td>standard_secret_name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/outputs.tf</td></tr><tr><td>Examples</td><td>complete</td><td>complete</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/examples/complete/main.tf</td></tr><tr><td>Wrappers</td><td>outputs.tf</td><td>versions.tf</td><td>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager/outputs.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_rotation\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: replica\n# output: standard_secret_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_rotation.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s11", "moduleId": 7, "title": "Version Stages and Version Lifecycle Behavior", "content": "<h2>Version Stages and Version Lifecycle Behavior</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: create_policy\n# output: standard_secret_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s12", "moduleId": 7, "title": "Variables API Surface and Consumer Contracts", "content": "<h2>Variables API Surface and Consumer Contracts</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_policy\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: source_policy_documents\n# output: standard_secret_replica\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_policy.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s13", "moduleId": 7, "title": "Outputs and Downstream Integrations", "content": "<h2>Outputs and Downstream Integrations</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_version\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: override_policy_documents\n# output: standard_secret_version_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_version.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s14", "moduleId": 7, "title": "Example Walkthrough: Standard + Rotation", "content": "<h2>Example Walkthrough: Standard + Rotation</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_version\" \"ignore_changes\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: policy_statements\n# output: standard_secret_string\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_version.ignore_changes</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s15", "moduleId": 7, "title": "Operational Risks (drift, accidental overwrite, staging)", "content": "<h2>Operational Risks (drift, accidental overwrite, staging)</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret_rotation\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"this\" {}\n\n# Trait focus\n# variable: block_public_policy\n# output: rotate_secret_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret_rotation.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.this</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Pin provider/module versions and run import/state validation drills before major refactors.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_s16", "moduleId": 7, "title": "Production Hardening Checklist for Secrets Lifecycle", "content": "<h2>Production Hardening Checklist for Secrets Lifecycle</h2><p><strong>Module:</strong> <code>terraform-aws-secrets-manager</code></p><pre>\n# Representative sketch from terraform-aws-secrets-manager\nresource \"aws_secretsmanager_secret\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: ignore_secret_changes\n# output: rotate_secret_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_secretsmanager_secret.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Pin provider/module versions and run import/state validation drills before major refactors.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-secrets-manager</code></div>", "quiz": false}, {"id": "m7_quiz", "moduleId": 7, "title": "Quiz: Secrets Manager Module", "content": "", "quiz": true}, {"id": "m8_s1", "moduleId": 8, "title": "Security Group Module Design and Rule Abstractions", "content": "<h2>Security Group Module Design and Rule Abstractions</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-security-group\n  -&gt; resource node: aws_security_group.this\n  -&gt; data hydration: aws_vpc.default\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_vpc\" \"default\" {}\n\n# Trait focus\n# variable: rules\n# output: security_group_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_vpc.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>_templates</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s2", "moduleId": 8, "title": "Root SG Creation Modes (`create_sg`, external SG ID)", "content": "<h2>Root SG Creation Modes (`create_sg`, external SG ID)</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group\" \"this_name_prefix\" {\n  tags = var.tags\n}\n\ndata \"aws_security_group\" \"default\" {}\n\n# Trait focus\n# variable: auto_groups\n# output: security_group_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group.this_name_prefix</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_security_group.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>computed</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>activemq</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s3", "moduleId": 8, "title": "Rule Taxonomy from `rules.tf` and `auto_groups`", "content": "<h2>Rule Taxonomy from `rules.tf` and `auto_groups`</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"ingress_rules\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"s3\" {}\n\n# Trait focus\n# variable: create\n# output: security_group_vpc_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.ingress_rules</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.s3</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>disabled</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>alertmanager</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s4", "moduleId": 8, "title": "Ingress Rule Patterns (CIDR, source SG, self, prefix list)", "content": "<h2>Ingress Rule Patterns (CIDR, source SG, self, prefix list)</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>create_sg</td><td>security_group_id</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/rules.tf</td></tr><tr><td>Outputs</td><td>security_group_owner_id</td><td>security_group_name</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/modules/http-80/main.tf</td></tr><tr><td>Examples</td><td>dynamic</td><td>rules-only</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/modules/mysql/main.tf</td></tr><tr><td>Wrappers</td><td>carbon-relay-ng</td><td>consul</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/examples/complete/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"computed_ingress_rules\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"dynamodb\" {}\n\n# Trait focus\n# variable: create_sg\n# output: security_group_owner_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.computed_ingress_rules</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.dynamodb</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>dynamic</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>carbon-relay-ng</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s5", "moduleId": 8, "title": "Egress Rule Patterns and Symmetry Controls", "content": "<h2>Egress Rule Patterns and Symmetry Controls</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"ingress_with_source_security_group_id\" {\n  tags = var.tags\n}\n\ndata \"aws_vpc\" \"default\" {}\n\n# Trait focus\n# variable: security_group_id\n# output: security_group_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.ingress_with_source_security_group_id</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_vpc.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>http</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>cassandra</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s6", "moduleId": 8, "title": "Computed Rule Variants and Count-Based Handling", "content": "<h2>Computed Rule Variants and Count-Based Handling</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"computed_ingress_with_source_security_group_id\" {\n  tags = var.tags\n}\n\ndata \"aws_security_group\" \"default\" {}\n\n# Trait focus\n# variable: vpc_id\n# output: security_group_description\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.computed_ingress_with_source_security_group_id</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_security_group.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>rules-only</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>consul</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s7", "moduleId": 8, "title": "Dynamic Rule Authoring and Reusable Rule Objects", "content": "<h2>Dynamic Rule Authoring and Reusable Rule Objects</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"ingress_with_cidr_blocks\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"s3\" {}\n\n# Trait focus\n# variable: name\n# output: wrapper\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.ingress_with_cidr_blocks</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.s3</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>dax-cluster</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s8", "moduleId": 8, "title": "Prefix List and Managed Prefix List Behaviors", "content": "<h2>Prefix List and Managed Prefix List Behaviors</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-security-group\n  -&gt; resource node: aws_security_group_rule.computed_ingress_with_cidr_blocks\n  -&gt; data hydration: aws_prefix_list.dynamodb\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"computed_ingress_with_cidr_blocks\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"dynamodb\" {}\n\n# Trait focus\n# variable: use_name_prefix\n# output: service_one_security_group_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.computed_ingress_with_cidr_blocks</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.dynamodb</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>computed</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>docker-swarm</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s9", "moduleId": 8, "title": "Named Service Modules (`http-80`, `mysql`, `kubernetes-api`)", "content": "<h2>Named Service Modules (`http-80`, `mysql`, `kubernetes-api`)</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_vpc\" \"default\" {}\n\n# Trait focus\n# variable: description\n# output: service_one_security_group_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_vpc.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>disabled</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>elasticsearch</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s10", "moduleId": 8, "title": "Massive Wrapper Ecosystem and Reuse Strategy", "content": "<h2>Massive Wrapper Ecosystem and Reuse Strategy</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>revoke_rules_on_delete</td><td>tags</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/rules.tf</td></tr><tr><td>Outputs</td><td>service_tow_security_group_arn</td><td>service_two_security_group_id</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/modules/http-80/main.tf</td></tr><tr><td>Examples</td><td>dynamic</td><td>rules-only</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/modules/mysql/main.tf</td></tr><tr><td>Wrappers</td><td>etcd</td><td>graphite-statsd</td><td>/Users/mohannarayanaswamy/git/terraform-aws-security-group/examples/complete/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group\" \"this_name_prefix\" {\n  tags = var.tags\n}\n\ndata \"aws_security_group\" \"default\" {}\n\n# Trait focus\n# variable: revoke_rules_on_delete\n# output: service_tow_security_group_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group.this_name_prefix</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_security_group.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>dynamic</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>etcd</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s11", "moduleId": 8, "title": "Rule Conflict and Drift Troubleshooting", "content": "<h2>Rule Conflict and Drift Troubleshooting</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"ingress_rules\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"s3\" {}\n\n# Trait focus\n# variable: tags\n# output: service_two_security_group_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.ingress_rules</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.s3</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>http</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>grafana</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s12", "moduleId": 8, "title": "Timeouts, Deletion Behavior, and Revoke Semantics", "content": "<h2>Timeouts, Deletion Behavior, and Revoke Semantics</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"computed_ingress_rules\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"dynamodb\" {}\n\n# Trait focus\n# variable: create_timeout\n# output: security_group_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.computed_ingress_rules</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.dynamodb</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>rules-only</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>graphite-statsd</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s13", "moduleId": 8, "title": "Output Traits and SG ID/ARN Contract", "content": "<h2>Output Traits and SG ID/ARN Contract</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"ingress_with_source_security_group_id\" {\n  tags = var.tags\n}\n\ndata \"aws_vpc\" \"default\" {}\n\n# Trait focus\n# variable: delete_timeout\n# output: security_group_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.ingress_with_source_security_group_id</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_vpc.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>_templates</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s14", "moduleId": 8, "title": "Example Deep Dive: Complete + Dynamic", "content": "<h2>Example Deep Dive: Complete + Dynamic</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"computed_ingress_with_source_security_group_id\" {\n  tags = var.tags\n}\n\ndata \"aws_security_group\" \"default\" {}\n\n# Trait focus\n# variable: ingress_rules\n# output: security_group_vpc_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.computed_ingress_with_source_security_group_id</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_security_group.default</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>computed</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>activemq</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s15", "moduleId": 8, "title": "Scaling SG Rules Across Large Estates", "content": "<h2>Scaling SG Rules Across Large Estates</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"ingress_with_cidr_blocks\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"s3\" {}\n\n# Trait focus\n# variable: ingress_with_self\n# output: security_group_owner_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.ingress_with_cidr_blocks</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.s3</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>disabled</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>alertmanager</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Pin provider/module versions and run import/state validation drills before major refactors.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_s16", "moduleId": 8, "title": "Best Practices for Safe Rule Evolution", "content": "<h2>Best Practices for Safe Rule Evolution</h2><p><strong>Module:</strong> <code>terraform-aws-security-group</code></p><pre>\n# Representative sketch from terraform-aws-security-group\nresource \"aws_security_group_rule\" \"computed_ingress_with_cidr_blocks\" {\n  tags = var.tags\n}\n\ndata \"aws_prefix_list\" \"dynamodb\" {}\n\n# Trait focus\n# variable: ingress_with_cidr_blocks\n# output: security_group_name\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_security_group_rule.computed_ingress_with_cidr_blocks</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_prefix_list.dynamodb</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>dynamic</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>carbon-relay-ng</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Pin provider/module versions and run import/state validation drills before major refactors.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-security-group</code></div>", "quiz": false}, {"id": "m8_quiz", "moduleId": 8, "title": "Quiz: Security Group Module", "content": "", "quiz": true}, {"id": "m9_s1", "moduleId": 9, "title": "VPC Module Architecture and Subnet Taxonomy", "content": "<h2>VPC Module Architecture and Subnet Taxonomy</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-vpc\n  -&gt; resource node: aws_flow_log.this\n  -&gt; data hydration: aws_availability_zones.available\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_flow_log\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: create_vpc\n# output: vpc_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_flow_log.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>block-public-access</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>flow-log</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s2", "moduleId": 9, "title": "Core VPC Creation and CIDR Association", "content": "<h2>Core VPC Creation and CIDR Association</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_cloudwatch_log_group\" \"flow_log\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: region\n# output: vpc_arn\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_cloudwatch_log_group.flow_log</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s3", "moduleId": 9, "title": "Public Subnet, Routes, and Internet Gateway Flow", "content": "<h2>Public Subnet, Routes, and Internet Gateway Flow</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: tags\n# output: vpc_cidr_block\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>flow-log</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s4", "moduleId": 9, "title": "Private Subnet, NAT Gateway, and DNS64 Patterns", "content": "<h2>Private Subnet, NAT Gateway, and DNS64 Patterns</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>name</td><td>cidr</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/vpc-flow-logs.tf</td></tr><tr><td>Outputs</td><td>default_security_group_id</td><td>default_network_acl_id</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/modules/flow-log/main.tf</td></tr><tr><td>Examples</td><td>ipam</td><td>ipv6-only</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/modules/vpc-endpoints/main.tf</td></tr><tr><td>Wrappers</td><td>variables.tf</td><td>vpc-endpoints</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/examples/separate-route-tables/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_ipv4_cidr_block_association\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: name\n# output: default_security_group_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_ipv4_cidr_block_association.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>ipam</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s5", "moduleId": 9, "title": "Database Subnet and DB Route/NACL Patterns", "content": "<h2>Database Subnet and DB Route/NACL Patterns</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_block_public_access_options\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"flow_log_cloudwatch_assume_role\" {}\n\n# Trait focus\n# variable: cidr\n# output: default_network_acl_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_block_public_access_options.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.flow_log_cloudwatch_assume_role</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>ipv6-dualstack</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s6", "moduleId": 9, "title": "Redshift and ElastiCache Subnet Architectures", "content": "<h2>Redshift and ElastiCache Subnet Architectures</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_block_public_access_exclusion\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"vpc_flow_log_cloudwatch\" {}\n\n# Trait focus\n# variable: secondary_cidr_blocks\n# output: default_route_table_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_block_public_access_exclusion.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.vpc_flow_log_cloudwatch</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>ipv6-only</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>vpc-endpoints</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s7", "moduleId": 9, "title": "Intra and Outpost Subnet Patterns", "content": "<h2>Intra and Outpost Subnet Patterns</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_dhcp_options\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_outposts_outpost\" \"shared\" {}\n\n# Trait focus\n# variable: instance_tenancy\n# output: vpc_instance_tenancy\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_dhcp_options.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_outposts_outpost.shared</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>issues</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>flow-log</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s8", "moduleId": 9, "title": "DHCP Options and VPC-Level Service Settings", "content": "<h2>DHCP Options and VPC-Level Service Settings</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><div class=\"diagram\">\nClient change request\n  -&gt; module graph: terraform-aws-vpc\n  -&gt; resource node: aws_vpc_dhcp_options_association.this\n  -&gt; data hydration: aws_iam_policy_document.dynamodb_endpoint_policy\n  -&gt; outputs consumed by downstream modules\n</div><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_dhcp_options_association\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"dynamodb_endpoint_policy\" {}\n\n# Trait focus\n# variable: azs\n# output: vpc_enable_dns_support\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_dhcp_options_association.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.dynamodb_endpoint_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>manage-default-vpc</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s9", "moduleId": 9, "title": "Network ACL Design Across Subnet Classes", "content": "<h2>Network ACL Design Across Subnet Classes</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_flow_log\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_availability_zones\" \"available\" {}\n\n# Trait focus\n# variable: enable_dns_hostnames\n# output: vpc_enable_dns_hostnames\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_flow_log.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_availability_zones.available</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>network-acls</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s10", "moduleId": 9, "title": "IPv6 and Dualstack Strategies", "content": "<h2>IPv6 and Dualstack Strategies</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><table><thead><tr><th>Trait group</th><th>Primary</th><th>Secondary</th><th>Reference</th></tr></thead><tbody><tr><td>Input variables</td><td>enable_dns_support</td><td>enable_network_address_usage_metrics</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/vpc-flow-logs.tf</td></tr><tr><td>Outputs</td><td>vpc_main_route_table_id</td><td>vpc_ipv6_association_id</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/modules/flow-log/main.tf</td></tr><tr><td>Examples</td><td>outpost</td><td>separate-route-tables</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/modules/vpc-endpoints/main.tf</td></tr><tr><td>Wrappers</td><td>variables.tf</td><td>vpc-endpoints</td><td>/Users/mohannarayanaswamy/git/terraform-aws-vpc/examples/separate-route-tables/main.tf</td></tr></tbody></table><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_cloudwatch_log_group\" \"flow_log\" {\n  tags = var.tags\n}\n\ndata \"aws_region\" \"current\" {}\n\n# Trait focus\n# variable: enable_dns_support\n# output: vpc_main_route_table_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_cloudwatch_log_group.flow_log</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_region.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>outpost</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s11", "moduleId": 9, "title": "Flow Logs in Root and Submodule Implementations", "content": "<h2>Flow Logs in Root and Submodule Implementations</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_caller_identity\" \"current\" {}\n\n# Trait focus\n# variable: enable_network_address_usage_metrics\n# output: vpc_ipv6_association_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_caller_identity.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>secondary-cidr-blocks</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>versions.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s12", "moduleId": 9, "title": "Flow Log IAM Role/Policy Construction", "content": "<h2>Flow Log IAM Role/Policy Construction</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_ipv4_cidr_block_association\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_partition\" \"current\" {}\n\n# Trait focus\n# variable: use_ipam_pool\n# output: vpc_ipv6_cidr_block\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_ipv4_cidr_block_association.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_partition.current</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>separate-route-tables</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>vpc-endpoints</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s13", "moduleId": 9, "title": "VPC Endpoints Submodule and Endpoint SG Handling", "content": "<h2>VPC Endpoints Submodule and Endpoint SG Handling</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_block_public_access_options\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"flow_log_cloudwatch_assume_role\" {}\n\n# Trait focus\n# variable: ipv4_ipam_pool_id\n# output: vpc_secondary_cidr_blocks\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_block_public_access_options.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.flow_log_cloudwatch_assume_role</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>block-public-access</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>flow-log</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s14", "moduleId": 9, "title": "IPAM-Based CIDR Allocation Examples", "content": "<h2>IPAM-Based CIDR Allocation Examples</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_block_public_access_exclusion\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"vpc_flow_log_cloudwatch\" {}\n\n# Trait focus\n# variable: ipv4_netmask_length\n# output: vpc_owner_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_block_public_access_exclusion.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.vpc_flow_log_cloudwatch</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>complete</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>main.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"warn\"><strong>Troubleshooting:</strong> Validate dependency edges, provider auth, and state drift before apply. For unstable plans, compare module root with examples and wrappers.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s15", "moduleId": 9, "title": "Default VPC Management and Safe Adoption", "content": "<h2>Default VPC Management and Safe Adoption</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_dhcp_options\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_outposts_outpost\" \"shared\" {}\n\n# Trait focus\n# variable: enable_ipv6\n# output: vpc_block_public_access_exclusions\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_dhcp_options.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_outposts_outpost.shared</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>flow-log</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>outputs.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-3.0.md, docs/UPGRADE-4.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_s16", "moduleId": 9, "title": "Upgrade and State Transition Considerations", "content": "<h2>Upgrade and State Transition Considerations</h2><p><strong>Module:</strong> <code>terraform-aws-vpc</code></p><pre>\n# Representative sketch from terraform-aws-vpc\nresource \"aws_vpc_dhcp_options_association\" \"this\" {\n  tags = var.tags\n}\n\ndata \"aws_iam_policy_document\" \"dynamodb_endpoint_policy\" {}\n\n# Trait focus\n# variable: ipv6_cidr\n# output: dhcp_options_id\n</pre><table><thead><tr><th>Signal</th><th>Observed value</th><th>Operational use</th></tr></thead><tbody><tr><td>Primary resource</td><td>aws_vpc_dhcp_options_association.this</td><td>Graph/debug anchor during plan review</td></tr><tr><td>Primary data source</td><td>aws_iam_policy_document.dynamodb_endpoint_policy</td><td>Provider lookup or policy rendering</td></tr><tr><td>Example path</td><td>ipam</td><td>Hands-on reproduction scenario</td></tr><tr><td>Wrapper path</td><td>variables.tf</td><td>Environment-scale reuse pattern</td></tr></tbody></table><div class=\"real\"><strong>Upgrade/Migration:</strong> Review <code>docs/UPGRADE-3.0.md, docs/UPGRADE-4.0.md</code> and stage state moves in lower environments before production rollout.</div><div class=\"tip\"><strong>Path reference:</strong> <code>/Users/mohannarayanaswamy/git/terraform-aws-vpc</code></div>", "quiz": false}, {"id": "m9_quiz", "moduleId": 9, "title": "Quiz: VPC Module", "content": "", "quiz": true}];

const QUIZ_DATA = {"title": "Terraform AWS Modules Workshop Quiz", "version": "3.1", "totalQuestions": 155, "modules": [{"id": 0, "name": "Terraform + Terragrunt + HCL Foundations", "questions": [{"id": "q0_1", "question": "Which Terraform command should run before `apply` to preview create/update/replace actions?", "options": ["terraform plan", "terraform output", "terraform fmt", "terraform providers"], "answer": 0, "explanation": "Use `plan` to inspect the execution graph and catch destructive changes early."}, {"id": "q0_2", "question": "In HCL, which block defines input values that callers can set?", "options": ["variable", "output", "locals", "provider"], "answer": 0, "explanation": "The `variable` block defines module inputs, types, defaults, and validation rules."}, {"id": "q0_3", "question": "What is the primary purpose of `terraform validate` in CI?", "options": ["Catch configuration and type errors before planning", "Rotate state locks", "Import unmanaged resources", "Refresh only data sources"], "answer": 0, "explanation": "`validate` performs static checks so invalid configs fail early in pipelines."}, {"id": "q0_4", "question": "When should `for_each` be preferred over `count`?", "options": ["When instances are keyed by stable names", "When every instance is fully identical", "When no collection input exists", "When provider aliases are disabled"], "answer": 0, "explanation": "`for_each` gives stable addresses and reduces churn when list ordering changes."}, {"id": "q0_5", "question": "What does `lifecycle { create_before_destroy = true }` optimize for?", "options": ["Reduced downtime during replacement", "Lower Terraform state size", "Faster `init` plugin downloads", "Automatic import of existing resources"], "answer": 0, "explanation": "It creates replacement resources first, then removes old ones."}, {"id": "q0_6", "question": "What problem does a `moved` block solve during refactors?", "options": ["Maps old resource addresses to new addresses", "Encrypts state at rest", "Pins provider versions", "Runs post-apply hooks"], "answer": 0, "explanation": "`moved` keeps resource history intact when addresses change."}, {"id": "q0_7", "question": "In Terragrunt, what does `include` mainly provide?", "options": ["Shared parent configuration reuse", "AWS credential vending", "Automatic drift correction", "State backend migration"], "answer": 0, "explanation": "`include` helps DRY common backend/provider/input settings."}, {"id": "q0_8", "question": "Why use Terragrunt `dependency` with `mock_outputs`?", "options": ["To let plans run when upstream outputs are unavailable", "To force downstream apply before upstream", "To bypass variable validation", "To disable remote state access"], "answer": 0, "explanation": "`mock_outputs` keeps planning deterministic in partially bootstrapped stacks."}, {"id": "q0_9", "question": "Which HCL type best fits a map of service settings with mixed fields?", "options": ["object", "number", "bool", "tuple(any)"], "answer": 0, "explanation": "`object` defines named attributes with explicit types for safer contracts."}, {"id": "q0_10", "question": "What is the main operational meaning of a `replace` action in plan output?", "options": ["Terraform will destroy and recreate that instance", "Terraform will only refresh state", "Terraform will skip provider calls", "Terraform will create a data source"], "answer": 0, "explanation": "`replace` indicates immutable field changes or lifecycle-driven recreation."}, {"id": "q0_11", "question": "What does `ignore_changes` protect against most directly?", "options": ["Perpetual diffs from externally-managed attributes", "Missing provider credentials", "Broken module source URLs", "Incorrect variable defaults"], "answer": 0, "explanation": "It suppresses noise for fields intentionally managed outside Terraform."}, {"id": "q0_12", "question": "What is the best first step when a plan behaves unexpectedly in CI?", "options": ["Reproduce locally with the same provider/backend versions", "Delete state and re-run apply", "Disable all validations", "Convert modules to inline resources"], "answer": 0, "explanation": "Matching versions and backend context is essential for deterministic debugging."}, {"id": "q0_13", "question": "Why run Terraform/Terragrunt in containers for team workflows?", "options": ["To keep tooling versions reproducible across machines", "To remove all IAM requirements", "To avoid remote state usage", "To eliminate module version pinning"], "answer": 0, "explanation": "Containerized execution reduces environment drift between developers and CI."}, {"id": "q0_14", "question": "In large AWS estates, why separate module inputs/outputs carefully?", "options": ["To make dependencies explicit and reusable across environments", "To increase plan runtime intentionally", "To avoid using variables", "To force one giant root module"], "answer": 0, "explanation": "Clear contracts improve composability and reduce accidental coupling."}, {"id": "q0_15", "question": "What is a practical use of storing plan metadata in SQL while using gRPC for config delivery?", "options": ["Audit drift and change history while distributing resolved outputs", "Replace Terraform state entirely", "Generate IAM credentials automatically", "Compile HCL into CloudFormation"], "answer": 0, "explanation": "gRPC can publish runtime config while SQL keeps queryable change records."}, {"id": "q0_16", "question": "Which Terraform file usually defines typed input parameters and validation rules?", "options": ["variables.tf", "outputs.tf", "README.md", ".terraform.lock.hcl"], "answer": 0, "explanation": "`variables.tf` is typically the module input contract for callers."}, {"id": "q0_17", "question": "What is the best way to implement constants in Terraform when using a `constants.tf` file?", "options": ["Define shared values in a `locals` block", "Use `output` blocks as constants", "Store constants in provider blocks only", "Write constants into state manually"], "answer": 0, "explanation": "`constants.tf` is usually a convention file that contains reusable `locals` values."}, {"id": "q0_18", "question": "In a multi-account Terragrunt layout, where should backend/provider defaults usually live?", "options": ["In a parent/root `terragrunt.hcl` that children include", "In each child module with copied blocks", "Only in shell scripts", "Inside `outputs.tf` files"], "answer": 0, "explanation": "Parent include patterns keep configuration DRY and consistent across accounts/regions."}, {"id": "q0_19", "question": "What is the key difference between a Terraform `data` block and a `resource` block?", "options": ["`data` reads existing infrastructure; `resource` manages lifecycle", "`data` creates resources; `resource` only reads", "Both always create infrastructure", "Neither can reference other blocks"], "answer": 0, "explanation": "Use `data` for lookup/read and `resource` for create/update/destroy ownership."}, {"id": "q0_20", "question": "Which HCL function is used to combine tag maps from global and service-level inputs?", "options": ["merge", "length", "flatten", "replace"], "answer": 0, "explanation": "`merge` combines maps and is commonly used for standard tagging patterns."}]}, {"id": 1, "name": "EC2 Instance Module", "questions": [{"id": "q1_1", "question": "For EC2 module inputs, what is the safest AMI strategy for repeatable environments?", "options": ["Pin AMI selection with controlled variables/SSM parameters", "Always use the latest public AMI implicitly", "Hardcode AMI per subnet", "Disable AMI updates in all regions"], "answer": 0, "explanation": "Controlled AMI inputs keep upgrades intentional and auditable."}, {"id": "q1_2", "question": "Which option best hardens instance metadata access?", "options": ["Require IMDSv2 tokens via metadata options", "Disable all metadata permanently", "Expose metadata over public internet", "Use user data to store long-lived keys"], "answer": 0, "explanation": "Requiring IMDSv2 reduces SSRF-style credential theft risk."}, {"id": "q1_3", "question": "What is the role of an instance profile in EC2 provisioning?", "options": ["Attach an IAM role to the instance at runtime", "Store Terraform backend credentials", "Create VPC route tables", "Generate AMI snapshots automatically"], "answer": 0, "explanation": "Instance profiles bridge EC2 instances to IAM roles."}, {"id": "q1_4", "question": "When using spot instances, what should production modules include?", "options": ["Interruption-aware capacity fallback and lifecycle handling", "Only one AZ deployment", "No autoscaling policies", "Manual replacement scripts only"], "answer": 0, "explanation": "Spot capacity is volatile; resilient modules need fallback behavior."}, {"id": "q1_5", "question": "Why separate root and additional EBS block device settings?", "options": ["To tune persistence and performance per volume purpose", "Because Terraform requires one disk type only", "To disable encryption entirely", "To avoid tags on volumes"], "answer": 0, "explanation": "Different workloads need different size/iops/encryption policies."}, {"id": "q1_6", "question": "What does `create_before_destroy` help with for instance replacements?", "options": ["Maintain service continuity during immutable changes", "Reduce IAM permissions needed", "Disable Terraform state writes", "Force one-by-one AZ failures"], "answer": 0, "explanation": "It minimizes downtime when replacement is unavoidable."}, {"id": "q1_7", "question": "Which output is most useful for downstream security modules?", "options": ["The instance security group or network interface identifiers", "The module README path", "The terraform binary checksum", "The local workspace name"], "answer": 0, "explanation": "Downstream network policy often depends on SG/ENI identities."}, {"id": "q1_8", "question": "In Session Manager-oriented examples, what is a key prerequisite?", "options": ["SSM permissions on the instance role and network reachability", "Open SSH from 0.0.0.0/0 always", "A public Elastic IP for each instance", "Disabling CloudWatch agent"], "answer": 0, "explanation": "Session Manager needs IAM + connectivity to SSM endpoints."}, {"id": "q1_9", "question": "Why model capacity reservation fields explicitly in variables?", "options": ["To control placement behavior without editing module internals", "To avoid passing any compute constraints", "To disable launch templates globally", "To force dedicated hosts only"], "answer": 0, "explanation": "Exposed variables let teams choose reservation strategy per environment."}, {"id": "q1_10", "question": "What is the benefit of tagging EC2, EBS, and ENIs consistently?", "options": ["Improved cost allocation and incident triage", "Faster provider plugin downloads", "Automatic state migration", "Bypassing IAM policies"], "answer": 0, "explanation": "Consistent tags improve governance and operations at scale."}, {"id": "q1_11", "question": "How should user data be managed for large fleets?", "options": ["Template and version it as module input, not ad hoc edits", "Store it only in wiki pages", "Disable all bootstrapping", "Inline random shell snippets in each environment"], "answer": 0, "explanation": "Versioned user data improves reproducibility and reviewability."}, {"id": "q1_12", "question": "When should an Elastic IP be attached in module design?", "options": ["Only for stable public ingress/egress requirements", "For every private-only backend", "When NAT gateways exist already for all traffic", "To replace security groups"], "answer": 0, "explanation": "EIPs are finite and should be used only where static public IP is required."}, {"id": "q1_13", "question": "What does an EC2 module output contract primarily provide?", "options": ["Stable identifiers for composition with other modules", "CLI aliases for developers", "Terraform state encryption keys", "Automatic AMI rebuilds"], "answer": 0, "explanation": "Outputs are the API between modules."}, {"id": "q1_14", "question": "Why keep subnet and security group inputs explicit instead of hidden defaults?", "options": ["It prevents accidental placement and exposure in production", "It makes modules impossible to reuse", "It removes need for validation", "It guarantees lower costs in all regions"], "answer": 0, "explanation": "Explicit network inputs reduce blast radius and surprise behavior."}, {"id": "q1_15", "question": "What is a good failure-handling pattern for instance shutdown behavior settings?", "options": ["Validate allowed values and document stop/terminate expectations", "Allow any free-form string", "Set terminate always without review", "Ignore lifecycle settings entirely"], "answer": 0, "explanation": "Validation catches destructive misconfiguration before apply."}]}, {"id": 2, "name": "ECS Module", "questions": [{"id": "q2_1", "question": "In ECS architecture, why separate cluster and service concerns?", "options": ["It enables independent scaling and reuse boundaries", "Terraform requires separate repositories", "Clusters cannot host multiple services", "Services cannot reference task definitions"], "answer": 0, "explanation": "Separation improves modularity and operational ownership."}, {"id": "q2_2", "question": "What is the difference between task role and execution role?", "options": ["Task role is for app AWS API calls; execution role is for ECS agent pulls/logging", "Both roles are identical and interchangeable", "Execution role is only for EC2 launch templates", "Task role is only for CloudWatch metrics"], "answer": 0, "explanation": "Keeping role purposes distinct improves least-privilege design."}, {"id": "q2_3", "question": "Which ECS setting controls how many tasks run simultaneously?", "options": ["desired_count", "launch_type_version", "capacity_provider_weight_only", "task_cpu_arch"], "answer": 0, "explanation": "`desired_count` expresses steady-state service scale target."}, {"id": "q2_4", "question": "Why use capacity provider strategies in ECS?", "options": ["To balance placement across Fargate/EC2 capacity pools", "To disable autoscaling", "To remove task definitions", "To bypass IAM requirements"], "answer": 0, "explanation": "Capacity providers define where tasks should run and at what proportions."}, {"id": "q2_5", "question": "What is a core requirement for Fargate tasks?", "options": ["awsvpc networking mode with compatible CPU/memory combos", "Host networking with root access", "Static container IPs in task JSON", "Dedicated EC2 launch templates"], "answer": 0, "explanation": "Fargate enforces specific networking and resource constraints."}, {"id": "q2_6", "question": "What should container definition modules standardize first?", "options": ["Logging, environment variables, and secret injection patterns", "Random container names per deploy", "Hardcoded image tags in code", "Manual edits directly in state"], "answer": 0, "explanation": "Standardized definitions reduce drift and improve observability."}, {"id": "q2_7", "question": "Why attach autoscaling policies to ECS services?", "options": ["To react to workload metrics instead of fixed capacity", "To remove health checks", "To avoid task definitions", "To force one task per AZ forever"], "answer": 0, "explanation": "Autoscaling helps maintain SLOs under variable load."}, {"id": "q2_8", "question": "What is the purpose of service security groups in ECS modules?", "options": ["Control inbound/outbound traffic at the task ENI boundary", "Encrypt Terraform state", "Generate container images", "Replace IAM policies"], "answer": 0, "explanation": "Network policies should be explicit per service blast radius."}, {"id": "q2_9", "question": "Which output is most useful for cross-module integrations?", "options": ["Cluster ARN or service ARN identifiers", "Terraform binary path", "README markdown size", "Provider plugin cache path"], "answer": 0, "explanation": "ARN outputs are commonly consumed by monitoring and policy modules."}, {"id": "q2_10", "question": "Why include upgrade guidance for ECS module versions?", "options": ["To handle breaking IAM/resource changes safely", "Because ECS APIs never evolve", "To avoid pinning versions", "To skip testing before promotion"], "answer": 0, "explanation": "Major module upgrades often require policy and state transition planning."}, {"id": "q2_11", "question": "What risk appears when execution role permissions are too narrow?", "options": ["Image pulls and log delivery failures at runtime", "Terraform init failure only", "ECS cluster deletion", "Loss of VPC route tables"], "answer": 0, "explanation": "Execution role must cover pull/logging dependencies."}, {"id": "q2_12", "question": "How do wrappers help ECS in multi-environment estates?", "options": ["They apply consistent defaults while keeping env-specific overrides small", "They eliminate the need for variables", "They force duplicate modules per account", "They disable composition"], "answer": 0, "explanation": "Wrappers reduce repetition and policy drift across accounts."}, {"id": "q2_13", "question": "What is a sane strategy for task definition image tags?", "options": ["Use immutable tags/digests promoted through environments", "Always use `latest` in production", "Randomize tags every apply", "Build image names from timestamps only"], "answer": 0, "explanation": "Immutable image references improve traceability and rollback."}, {"id": "q2_14", "question": "What should happen before enabling scheduled scaling actions?", "options": ["Validate baseline autoscaling metrics and service limits", "Delete service desired_count", "Disable alarms permanently", "Turn off deployment circuit breakers"], "answer": 0, "explanation": "Scheduled actions should align with observed traffic and quotas."}, {"id": "q2_15", "question": "When introducing a new ECS submodule feature, what is best practice?", "options": ["Expose it via typed variables with conservative defaults", "Hardcode all values for one environment", "Bypass reviews using local state only", "Couple feature flags to unrelated modules"], "answer": 0, "explanation": "Typed inputs and defaults keep adoption controlled and safe."}]}, {"id": 3, "name": "EKS Module", "questions": [{"id": "q3_1", "question": "What resource represents the EKS control plane in Terraform?", "options": ["aws_eks_cluster", "aws_autoscaling_group", "aws_iam_group", "aws_lb_target_group"], "answer": 0, "explanation": "`aws_eks_cluster` defines the control plane and core cluster settings."}, {"id": "q3_2", "question": "Why is an OIDC provider essential for IRSA?", "options": ["It lets Kubernetes service accounts assume scoped IAM roles", "It replaces Kubernetes RBAC", "It disables IAM policies", "It creates worker nodes automatically"], "answer": 0, "explanation": "IRSA depends on OIDC federation between cluster and IAM."}, {"id": "q3_3", "question": "What is the goal of access entries/policy associations in modern EKS modules?", "options": ["Manage cluster access declaratively instead of manual mappings", "Store pod logs in S3", "Configure VPC route propagation", "Replace node groups"], "answer": 0, "explanation": "Declarative access control improves repeatability and auditability."}, {"id": "q3_4", "question": "Why stage add-ons before/after compute carefully?", "options": ["Some add-ons depend on nodes while others bootstrap core networking first", "Add-ons are independent of cluster state", "It only affects Terraform fmt", "It removes need for IAM roles"], "answer": 0, "explanation": "Ordering errors can break cluster bring-up and upgrades."}, {"id": "q3_5", "question": "How do managed node groups differ from self-managed groups?", "options": ["Managed groups offload lifecycle operations to EKS", "Managed groups cannot scale", "Self-managed groups do not use EC2", "There is no operational difference"], "answer": 0, "explanation": "Managed node groups reduce operational burden for patching and rollouts."}, {"id": "q3_6", "question": "What does a Fargate profile primarily define?", "options": ["Namespace/label selectors for pods that run on Fargate", "Cluster endpoint TLS policy", "Route53 zone delegation", "KMS key rotation windows"], "answer": 0, "explanation": "Profiles map pod workloads to serverless compute behavior."}, {"id": "q3_7", "question": "Why does Karpenter integration often include an interruption queue?", "options": ["To handle spot/interruption events for graceful replacement", "To store Terraform state locks", "To publish kubectl output", "To generate IRSA roles automatically"], "answer": 0, "explanation": "Interruption handling improves availability under volatile capacity."}, {"id": "q3_8", "question": "What is a common hardening choice for EKS API endpoint access?", "options": ["Restrict public access CIDRs or use private endpoint patterns", "Expose endpoint globally with no controls", "Disable TLS for speed", "Allow anonymous IAM principals"], "answer": 0, "explanation": "Endpoint access controls reduce control-plane attack surface."}, {"id": "q3_9", "question": "Why separate cluster security group rules from worker node rules?", "options": ["Control-plane and workload traffic have different trust boundaries", "Security groups cannot be reused", "EKS requires one global SG only", "Node groups do not need egress"], "answer": 0, "explanation": "Separation improves least privilege and incident isolation."}, {"id": "q3_10", "question": "What is the value of `_user_data` generation modules?", "options": ["Consistent bootstrap scripts across node group variants", "Automatic Terraform state migration", "Replacing cloud-init entirely", "Disabling kubelet configuration"], "answer": 0, "explanation": "Centralized user data logic prevents bootstrap drift."}, {"id": "q3_11", "question": "What upgrade risk is common across major EKS module versions?", "options": ["Breaking changes in IAM, add-on defaults, and node group behavior", "Loss of all Terraform outputs", "Removal of Kubernetes API server", "Automatic downgrade of cluster version"], "answer": 0, "explanation": "Major upgrades need staged testing and migration notes."}, {"id": "q3_12", "question": "Why codify cluster logging settings in Terraform?", "options": ["To guarantee audit and troubleshooting coverage across environments", "To reduce IAM policy size", "To speed up kubectl commands", "To avoid CloudWatch entirely"], "answer": 0, "explanation": "Declarative logging avoids ad hoc operational blind spots."}, {"id": "q3_13", "question": "What is the purpose of wait semantics in node group orchestration?", "options": ["Ensure dependent resources are ready before progressing", "Make apply non-deterministic", "Skip health checks", "Disable rolling updates"], "answer": 0, "explanation": "Proper waits reduce race conditions during cluster build and upgrade."}, {"id": "q3_14", "question": "How should EKS module outputs be used in downstream modules?", "options": ["Consume cluster endpoint, CA data, and role/SG IDs as explicit inputs", "Parse them from state files manually", "Hardcode values in scripts forever", "Avoid outputs to reduce coupling"], "answer": 0, "explanation": "Explicit outputs enable safe composition and automation."}, {"id": "q3_15", "question": "What is a practical migration step before production EKS upgrades?", "options": ["Apply module changes in lower environments and compare plan deltas", "Upgrade prod first for faster feedback", "Delete node groups preemptively", "Disable drift detection"], "answer": 0, "explanation": "Progressive rollout catches breaking changes before high-impact environments."}]}, {"id": 4, "name": "IAM Module", "questions": [{"id": "q4_1", "question": "What does the IAM account module usually manage?", "options": ["Account alias and password policy guardrails", "VPC CIDR allocations", "ECS task definitions", "KMS grants only"], "answer": 0, "explanation": "Account-level IAM posture is foundational for secure identity management."}, {"id": "q4_2", "question": "Why add MFA-related conditions to IAM group policies?", "options": ["To enforce stronger authentication for sensitive actions", "To increase API latency", "To replace all role assumptions", "To disable console access"], "answer": 0, "explanation": "MFA conditions are a common least-privilege hardening control."}, {"id": "q4_3", "question": "What is the main use of the IAM OIDC provider module?", "options": ["Federate external identity tokens for role assumption", "Encrypt S3 objects", "Create EKS node groups", "Attach EC2 security groups"], "answer": 0, "explanation": "OIDC federation enables workload and CI trust without long-lived keys."}, {"id": "q4_4", "question": "In IAM role modules, what does the assume role policy define?", "options": ["Who can assume the role and under which conditions", "What inline permissions the role grants itself", "How Terraform backend locks state", "Which VPC endpoints are required"], "answer": 0, "explanation": "Trust policy and permission policy are separate concerns."}, {"id": "q4_5", "question": "Why keep inline and managed policy attachments explicit?", "options": ["To control blast radius and policy lifecycle clearly", "Because AWS forbids managed policies", "To avoid role outputs", "To disable policy versioning"], "answer": 0, "explanation": "Explicit attachments improve reviewability and modular ownership."}, {"id": "q4_6", "question": "What is a key IRSA condition trait in trust policies?", "options": ["Matching `sub`/`aud` claims for the intended service account", "Matching AMI IDs", "Matching S3 bucket names only", "Matching Terraform workspace names"], "answer": 0, "explanation": "Fine-grained claims prevent over-broad pod role assumption."}, {"id": "q4_7", "question": "When should an IAM user module be used carefully?", "options": ["Only when workload cannot use roles/federation", "For all Kubernetes pods", "For every CI job by default", "As replacement for security groups"], "answer": 0, "explanation": "Users create long-lived credential risk; roles are usually safer."}, {"id": "q4_8", "question": "What does an IAM policy module typically output for reuse?", "options": ["Policy ARN for attachment by role/group/user modules", "Cluster endpoint URL", "KMS key material", "VPC route table IDs"], "answer": 0, "explanation": "Policy ARNs are the integration contract for downstream identity resources."}, {"id": "q4_9", "question": "Why split IAM modules by concern (role, policy, user, group)?", "options": ["To keep contracts clear and avoid monolithic identity definitions", "Because Terraform cannot handle nested modules", "To avoid variable validation", "To disable drift detection"], "answer": 0, "explanation": "Decomposition improves maintainability and change safety."}, {"id": "q4_10", "question": "What is the danger of wildcard actions/resources in IAM policies?", "options": ["Excess privilege and higher blast radius during compromise", "Faster provider downloads", "Automatic key rotation", "Lower CloudTrail volume"], "answer": 0, "explanation": "Least privilege requires scoping actions and resources intentionally."}, {"id": "q4_11", "question": "How do wrappers help IAM deployments across accounts?", "options": ["They enforce consistent baseline conditions and naming", "They remove need for review", "They prevent policy updates", "They replace AWS Organizations"], "answer": 0, "explanation": "Wrappers standardize posture while permitting small account-specific overrides."}, {"id": "q4_12", "question": "Why model IAM tags and path conventions in variables?", "options": ["To support governance, ownership tracking, and policy boundaries", "To increase apply runtime", "To disable account aliases", "To avoid module outputs"], "answer": 0, "explanation": "Consistent tagging/path strategy aids compliance and operations."}, {"id": "q4_13", "question": "What should be validated before rotating IAM access keys?", "options": ["Consumer readiness and overlap window for zero-downtime cutover", "Delete all old policies first", "Disable CloudTrail logs", "Recreate AWS account alias"], "answer": 0, "explanation": "Planned rotation avoids outages caused by stale credentials."}, {"id": "q4_14", "question": "What is the practical outcome of consolidated IAM module families?", "options": ["Reusable patterns for roles, policies, and federation at scale", "Single hardcoded role for all systems", "No need for trust policies", "Automatic cross-account admin everywhere"], "answer": 0, "explanation": "Consolidation reduces duplication and inconsistent security posture."}, {"id": "q4_15", "question": "During IAM module upgrades, what deserves highest attention?", "options": ["Trust policy behavior and permission scope diffs in plan output", "README typography changes", "Terraform colorized output", "Local plugin cache size"], "answer": 0, "explanation": "Identity changes can break workloads or create over-privilege if not reviewed."}]}, {"id": 5, "name": "KMS Module", "questions": [{"id": "q5_1", "question": "Which KMS setting controls how long key deletion is delayed?", "options": ["deletion_window_in_days", "key_spec_timeout", "kms_grace_hours", "recovery_period_seconds"], "answer": 0, "explanation": "Deletion window gives operators time to recover from accidental deletion requests."}, {"id": "q5_2", "question": "When is automatic key rotation typically supported?", "options": ["Symmetric customer-managed KMS keys", "All external key material keys", "Asymmetric signing keys only", "Aliases without backing keys"], "answer": 0, "explanation": "Rotation support depends on key type and AWS KMS capabilities."}, {"id": "q5_3", "question": "Why separate key owners, admins, and users in policy design?", "options": ["To enforce least privilege by responsibility", "To speed up alias creation", "To remove grant support", "To avoid CloudTrail logging"], "answer": 0, "explanation": "Role separation reduces accidental or malicious misuse."}, {"id": "q5_4", "question": "What is the purpose of a KMS alias?", "options": ["Provide a stable, readable pointer to a key", "Replace key policies", "Enable cross-region replication alone", "Disable key rotation"], "answer": 0, "explanation": "Aliases improve usability without changing key IDs."}, {"id": "q5_5", "question": "What do KMS grants provide compared with broad key policy statements?", "options": ["Scoped permissions for specific principals/use cases", "Faster Terraform plans", "Automatic key deletion recovery", "Cross-account VPC peering"], "answer": 0, "explanation": "Grants are useful for narrowly targeted access patterns."}, {"id": "q5_6", "question": "For multi-region encryption, what pair is commonly used?", "options": ["Primary key plus replica keys", "One alias without keys", "Only external keys", "Secrets Manager versions only"], "answer": 0, "explanation": "Replica keys align cryptographic context across regions."}, {"id": "q5_7", "question": "What is unique about external key material workflows?", "options": ["Key material lifecycle/import validity must be managed explicitly", "AWS rotates it automatically every 30 days", "It cannot be used with aliases", "It removes the need for policies"], "answer": 0, "explanation": "External material introduces additional operational controls and risks."}, {"id": "q5_8", "question": "Why include `aws_partition` and caller identity data in policies?", "options": ["To build correct ARNs across partitions/accounts", "To avoid using principals", "To disable IAM conditions", "To randomize key IDs"], "answer": 0, "explanation": "Dynamic ARN construction prevents hardcoded account/partition mistakes."}, {"id": "q5_9", "question": "What should happen before reducing KMS policy permissions?", "options": ["Review downstream services that encrypt/decrypt with that key", "Delete all aliases first", "Disable CloudWatch", "Recreate key immediately"], "answer": 0, "explanation": "Policy tightening can break running workloads if dependencies are unknown."}, {"id": "q5_10", "question": "How do key usage and key spec traits affect module design?", "options": ["They constrain allowed cryptographic operations and integrations", "They only impact key tags", "They are ignored by AWS KMS", "They control Terraform backend locks"], "answer": 0, "explanation": "Choosing wrong spec/usage can block required encryption workflows."}, {"id": "q5_11", "question": "Why expose key ARN outputs from the module?", "options": ["Other modules need it for encryption configuration", "It is required for `terraform init`", "It replaces IAM trust policy", "It configures VPC DHCP options"], "answer": 0, "explanation": "Key ARNs are common integration inputs across AWS services."}, {"id": "q5_12", "question": "What failure mode is common when key policy omits service principals?", "options": ["Dependent AWS services fail encryption operations", "Terraform cannot read variables", "KMS aliases are auto-deleted", "Region becomes inaccessible"], "answer": 0, "explanation": "Service integrations often need explicit policy permissions."}, {"id": "q5_13", "question": "In Route53 DNSSEC scenarios, why is KMS setup important?", "options": ["DNSSEC signing keys depend on correctly scoped KMS permissions", "DNSSEC never uses KMS", "It only changes VPC routes", "It only affects IAM users"], "answer": 0, "explanation": "DNSSEC workflows require strong, explicit cryptographic key controls."}, {"id": "q5_14", "question": "What should be reviewed during KMS module upgrades?", "options": ["Changes to policy templates, defaults, and resource addresses", "Only README badges", "Local shell aliases", "Terraform color theme"], "answer": 0, "explanation": "KMS upgrade diffs can affect security posture and service continuity."}, {"id": "q5_15", "question": "What is a safe operational pattern before scheduling key deletion?", "options": ["Confirm no active workloads still require decrypt access", "Delete all encrypted resources first automatically", "Force immediate deletion with zero window", "Detach all IAM policies blindly"], "answer": 0, "explanation": "Deletion planning must account for recovery and service dependency impact."}]}, {"id": 6, "name": "S3 Bucket Module", "questions": [{"id": "q6_1", "question": "What is a core reason to manage S3 buckets through a module?", "options": ["Enforce consistent security and lifecycle defaults", "Disable bucket policies globally", "Avoid versioning entirely", "Replace IAM roles"], "answer": 0, "explanation": "A module standardizes guardrails across many buckets/environments."}, {"id": "q6_2", "question": "When using Object Ownership `BucketOwnerEnforced`, what happens to ACLs?", "options": ["ACLs are effectively disabled for access control", "ACLs become mandatory for all objects", "ACLs control KMS grants", "ACLs define replication regions"], "answer": 0, "explanation": "Ownership controls can centralize authorization in policies instead of ACLs."}, {"id": "q6_3", "question": "Which feature is required for replication to function?", "options": ["Bucket versioning enabled on source and destination", "Static website hosting", "S3 Object Lambda", "Transfer Acceleration"], "answer": 0, "explanation": "Replication depends on object version history and replication IAM role setup."}, {"id": "q6_4", "question": "Why configure Block Public Access settings explicitly?", "options": ["To prevent accidental public exposure paths", "To increase PUT latency", "To enable anonymous replication", "To remove bucket encryption"], "answer": 0, "explanation": "Explicit BPA settings are a foundational S3 security control."}, {"id": "q6_5", "question": "What does server-side encryption configuration define?", "options": ["How S3 encrypts objects at rest (SSE-S3/SSE-KMS)", "How Terraform encrypts state lock files", "How IAM users authenticate", "How Route53 resolves bucket names"], "answer": 0, "explanation": "Encryption settings are part of baseline data protection controls."}, {"id": "q6_6", "question": "How do lifecycle rules improve large-bucket operations?", "options": ["They automate retention, transition, and expiration policies", "They disable CloudTrail events", "They replace bucket policies", "They force immediate object deletion only"], "answer": 0, "explanation": "Lifecycle policies reduce cost and enforce data governance automatically."}, {"id": "q6_7", "question": "Why model notification targets (Lambda/SQS/SNS) in Terraform?", "options": ["To keep event wiring and permissions declarative and auditable", "To bypass service permissions", "To avoid IAM policy documents", "To remove bucket policies"], "answer": 0, "explanation": "Notifications need both destination configuration and permission policy alignment."}, {"id": "q6_8", "question": "What is the purpose of request payer configuration?", "options": ["Control who pays request/data transfer costs in shared access patterns", "Enable bucket replication automatically", "Encrypt object metadata", "Configure IAM federation"], "answer": 0, "explanation": "Request payer affects billing semantics for cross-account consumers."}, {"id": "q6_9", "question": "When should object lock be enabled?", "options": ["When compliance retention/WORM requirements apply", "For all temporary CI artifacts", "Only when versioning is disabled", "Only for website buckets"], "answer": 0, "explanation": "Object lock is for strict retention controls and must be planned early."}, {"id": "q6_10", "question": "What does a combined bucket policy approach help with?", "options": ["Compose baseline denies plus service-specific allow statements", "Disable all IAM evaluation", "Remove the need for principals", "Guarantee public read by default"], "answer": 0, "explanation": "Policy composition keeps guardrails consistent while enabling controlled exceptions."}, {"id": "q6_11", "question": "Why provide outputs like bucket ARN and name?", "options": ["Downstream modules need them for policies and integrations", "They are required for terraform fmt", "They replace replication rules", "They create KMS aliases"], "answer": 0, "explanation": "Bucket identifiers are key integration points for many AWS services."}, {"id": "q6_12", "question": "What is a common pitfall when enabling replication?", "options": ["Missing IAM permissions for replication role/object ownership conditions", "Using too many lifecycle rules", "Setting bucket tags", "Using regional endpoints"], "answer": 0, "explanation": "Replication failures often trace back to policy or ownership misconfiguration."}, {"id": "q6_13", "question": "How should defaults be chosen for multi-environment S3 modules?", "options": ["Secure-by-default with explicit opt-in for risky behavior", "Public-by-default for faster testing", "No encryption by default", "Disable versioning always"], "answer": 0, "explanation": "Conservative defaults reduce accidental exposure in production."}, {"id": "q6_14", "question": "Why are directory/table bucket paths separated in module design?", "options": ["They represent different S3 feature sets and resource behaviors", "Terraform cannot manage standard buckets", "They only differ by naming", "They are aliases for the same API"], "answer": 0, "explanation": "Distinct resource models require explicit branching and inputs."}, {"id": "q6_15", "question": "During S3 module upgrades, what should be checked first?", "options": ["Plan diffs for policy, ownership, and replication behavior changes", "Only output ordering", "Provider binary size", "Shell history"], "answer": 0, "explanation": "S3 security-sensitive changes require careful drift and impact review."}]}, {"id": 7, "name": "Secrets Manager Module", "questions": [{"id": "q7_1", "question": "Which resource creates the metadata container for a secret?", "options": ["aws_secretsmanager_secret", "aws_ssm_parameter", "aws_kms_key_alias", "aws_iam_policy_document"], "answer": 0, "explanation": "Secret metadata and lifecycle are managed separately from secret values."}, {"id": "q7_2", "question": "What resource typically manages the secret value/version payload?", "options": ["aws_secretsmanager_secret_version", "aws_secretsmanager_resource_policy", "aws_s3_object", "aws_cloudwatch_log_group"], "answer": 0, "explanation": "Version resources handle staged secret values over time."}, {"id": "q7_3", "question": "Why is `ignore_secret_changes` or similar lifecycle handling used?", "options": ["To avoid overwriting externally-rotated secret values", "To disable encryption", "To remove KMS key usage", "To bypass IAM evaluation"], "answer": 0, "explanation": "Some teams rotate values outside Terraform and want drift tolerance."}, {"id": "q7_4", "question": "What is the purpose of enabling rotation with a Lambda function?", "options": ["Automate credential renewal on a defined schedule", "Disable secret replication", "Replace KMS policies", "Force AWSPREVIOUS deletion immediately"], "answer": 0, "explanation": "Rotation reduces manual secret management risk."}, {"id": "q7_5", "question": "How does KMS integration affect Secrets Manager?", "options": ["It defines the CMK used to encrypt secret data at rest", "It selects the secret rotation interval", "It controls VPC routing", "It creates IAM users"], "answer": 0, "explanation": "CMK selection is central to encryption boundary and key governance."}, {"id": "q7_6", "question": "Why configure replica regions for secrets?", "options": ["Improve regional resilience and latency for consumers", "Disable version stages", "Avoid IAM policies", "Replace rotation Lambda"], "answer": 0, "explanation": "Replication supports multi-region workloads and DR patterns."}, {"id": "q7_7", "question": "What does recovery window configuration control?", "options": ["Days before permanent deletion after a delete request", "How often rotation runs", "KMS key alias naming", "Terraform state lock timeout"], "answer": 0, "explanation": "Recovery windows provide rollback opportunity for accidental deletions."}, {"id": "q7_8", "question": "What do version stages like `AWSCURRENT` and `AWSPREVIOUS` represent?", "options": ["Labels for active and prior secret versions", "IAM trust relationships", "S3 lifecycle transitions", "ECS task states"], "answer": 0, "explanation": "Version stages coordinate secret cutovers for consumers."}, {"id": "q7_9", "question": "Why attach explicit secret resource policies?", "options": ["To scope which principals can read/manage the secret", "To choose secret random length", "To control subnet routing", "To disable CloudTrail logging"], "answer": 0, "explanation": "Resource policies enforce access boundaries beyond identity policy defaults."}, {"id": "q7_10", "question": "What risk exists if secret updates are blindly managed in Terraform apply?", "options": ["Accidental credential rollbacks or overwrites", "Loss of bucket versioning", "KMS key deletion", "EKS cluster recreation"], "answer": 0, "explanation": "State-driven value writes can conflict with runtime rotation workflows."}, {"id": "q7_11", "question": "Why include random password generation options in the module?", "options": ["Generate compliant initial secrets with policy constraints", "Replace IAM role trust policies", "Set VPC CIDR ranges", "Disable rotation support"], "answer": 0, "explanation": "Controlled random generation supports secure bootstrap without manual secrets."}, {"id": "q7_12", "question": "How should outputs from a secrets module be consumed?", "options": ["Expose ARNs/names, not secret plaintext", "Return plaintext in Terraform outputs", "Store plaintext in tags", "Publish plaintext in plan comments"], "answer": 0, "explanation": "Never leak secret material; integrate via identifiers and runtime fetch."}, {"id": "q7_13", "question": "What is the main purpose of block public policy style guardrails?", "options": ["Prevent overly broad secret access permissions", "Allow anonymous retrieval for testing", "Skip IAM policy evaluation", "Disable versioning"], "answer": 0, "explanation": "Guardrails reduce accidental data exposure risk."}, {"id": "q7_14", "question": "In production, what should be validated before enabling rotation?", "options": ["Lambda permissions, networking, and rollback process", "Only secret tags", "Route table propagation", "Terraform fmt formatting"], "answer": 0, "explanation": "Rotation failures can break auth flows without operational readiness."}, {"id": "q7_15", "question": "What is a good hardening practice for secret lifecycle operations?", "options": ["Use least privilege, audit trails, and staged rollout of changes", "Give admin rights to all workloads", "Disable deletion protection everywhere", "Store secrets in user data scripts"], "answer": 0, "explanation": "Defense-in-depth is critical for secret confidentiality and availability."}]}, {"id": 8, "name": "Security Group Module", "questions": [{"id": "q8_1", "question": "What does `create_sg = false` typically indicate in SG modules?", "options": ["Use an existing security group ID instead of creating one", "Disable all ingress/egress rules", "Delete rules on every apply", "Create only egress rules"], "answer": 0, "explanation": "This pattern lets teams attach rules to pre-existing shared SGs."}, {"id": "q8_2", "question": "Why model ingress and egress separately?", "options": ["They represent different traffic directions and risk controls", "AWS combines them automatically", "Egress is ignored by VPC", "Ingress cannot use CIDRs"], "answer": 0, "explanation": "Separate modeling improves review clarity and policy precision."}, {"id": "q8_3", "question": "When is a `self` rule useful?", "options": ["Allow traffic between members of the same security group", "Allow internet access from anywhere", "Block all east-west traffic", "Replace NACL rules"], "answer": 0, "explanation": "`self` enables controlled intra-tier communication patterns."}, {"id": "q8_4", "question": "Why use computed rule variants in Terraform SG modules?", "options": ["To handle values unknown until apply without plan-time failures", "To disable dynamic blocks", "To avoid state files", "To bypass IAM checks"], "answer": 0, "explanation": "Computed inputs need special handling to keep plans valid."}, {"id": "q8_5", "question": "What is a key risk with many inline SG rules in one resource?", "options": ["Rule churn and hard-to-review diffs during updates", "Inability to set tags", "Loss of VPC attachment", "Automatic public exposure"], "answer": 0, "explanation": "Fine-grained rule resources usually produce safer diffs."}, {"id": "q8_6", "question": "What does revoke-on-delete behavior help with?", "options": ["Cleanup of stale rules during replacement/removal", "Automatic policy encryption", "Cross-account assume role", "Faster terraform init"], "answer": 0, "explanation": "Explicit revoke behavior reduces orphaned network access."}, {"id": "q8_7", "question": "How do named service modules (for example `http-80`, `mysql`) help teams?", "options": ["They provide reusable, opinionated rule sets for common patterns", "They eliminate the need for SG IDs", "They force all ports open", "They remove egress controls"], "answer": 0, "explanation": "Prebuilt modules accelerate delivery with consistent guardrails."}, {"id": "q8_8", "question": "When should prefix lists be used in SG rules?", "options": ["When allowing AWS-managed or centrally maintained network ranges", "Only for localhost traffic", "Only with NACLs disabled", "Never in production"], "answer": 0, "explanation": "Prefix lists improve maintainability of shared CIDR allowlists."}, {"id": "q8_9", "question": "What is the best way to scale SG rule management across many apps?", "options": ["Compose reusable rule objects and wrappers with strict defaults", "Copy-paste one giant SG everywhere", "Use manual console edits only", "Disable drift checks"], "answer": 0, "explanation": "Composable patterns reduce duplication and misconfiguration."}, {"id": "q8_10", "question": "Why are output traits like SG ID/ARN important?", "options": ["Downstream modules need stable references for dependencies", "They increase provider speed", "They replace route tables", "They force one VPC per app"], "answer": 0, "explanation": "Identifiers are the contract between network and workload modules."}, {"id": "q8_11", "question": "What operational issue is common with SG drift?", "options": ["Out-of-band rule edits causing unexpected plan diffs", "Provider installation failure", "State backend corruption on init", "Missing module versions only"], "answer": 0, "explanation": "Drift detection is crucial for network security posture."}, {"id": "q8_12", "question": "How should destructive SG changes be introduced safely?", "options": ["Stage in lower environments and review plan blast radius", "Apply directly in production peak hours", "Disable all monitoring first", "Remove all egress rules blindly"], "answer": 0, "explanation": "Network changes can cause immediate outages; staged rollout is safer."}, {"id": "q8_13", "question": "Why are class-like rule taxonomies useful in SG modules?", "options": ["They standardize intent (web/db/internal) across teams", "They prevent all custom rules", "They replace IAM policy structure", "They disable module inputs"], "answer": 0, "explanation": "Rule classes improve readability and consistency at scale."}, {"id": "q8_14", "question": "What is a secure default for inbound rules?", "options": ["Deny by default, then explicitly allow required sources/ports", "Allow all and tighten later", "Always allow 0.0.0.0/0 on admin ports", "Mirror egress rules to ingress automatically"], "answer": 0, "explanation": "Least-privilege networking starts from restrictive ingress defaults."}, {"id": "q8_15", "question": "What should be included in SG module documentation for productivity?", "options": ["Rule trait definitions, examples, and migration guidance", "Only repository badges", "Screenshots without code", "No explanation of defaults"], "answer": 0, "explanation": "Clear docs reduce onboarding time and configuration mistakes."}]}, {"id": 9, "name": "VPC Module", "questions": [{"id": "q9_1", "question": "Which component enables internet egress for public subnets?", "options": ["Internet Gateway attached to the VPC and routed from public route tables", "NAT Gateway in private subnet only", "DHCP options set", "Flow log destination"], "answer": 0, "explanation": "Public subnet internet access requires IGW + correct route association."}, {"id": "q9_2", "question": "Why are NAT gateways commonly used in private subnet patterns?", "options": ["Allow outbound internet access without inbound exposure", "Provide inbound SSH directly", "Replace security groups", "Disable route tables"], "answer": 0, "explanation": "NAT keeps private resources non-public while permitting updates/dependencies."}, {"id": "q9_3", "question": "What is the purpose of separate subnet classes (public/private/database/intra)?", "options": ["Apply least-privilege routing and policy by workload type", "Reduce VPC CIDR size automatically", "Disable NACL support", "Avoid using route tables"], "answer": 0, "explanation": "Subnet taxonomy clarifies trust boundaries and traffic paths."}, {"id": "q9_4", "question": "How do security groups and NACLs differ fundamentally?", "options": ["Security groups are stateful; NACLs are stateless", "Both are stateless only", "Both are stateful only", "Only NACLs support inbound rules"], "answer": 0, "explanation": "Understanding statefulness is critical for troubleshooting connectivity."}, {"id": "q9_5", "question": "When should egress-only internet gateways be considered?", "options": ["For IPv6 outbound-only connectivity from private resources", "For IPv4 NAT replacement in public subnets", "For IAM federation", "For KMS key replication"], "answer": 0, "explanation": "Egress-only IGW is an IPv6-specific control for outbound traffic."}, {"id": "q9_6", "question": "Why configure DHCP options in VPC modules?", "options": ["Set DNS/domain-name behavior for instances in the VPC", "Encrypt route table entries", "Control IAM role assumption", "Manage SG ingress priorities"], "answer": 0, "explanation": "DHCP options influence name resolution and network configuration defaults."}, {"id": "q9_7", "question": "What does VPC flow log configuration provide operationally?", "options": ["Network traffic observability for troubleshooting and audit", "Automatic SG remediation", "Subnet auto-scaling", "KMS key deletion alerts only"], "answer": 0, "explanation": "Flow logs are foundational for incident investigation and governance."}, {"id": "q9_8", "question": "Why are endpoint submodules useful in private VPC designs?", "options": ["They provide private access to AWS services without internet traversal", "They replace route tables entirely", "They remove IAM policies", "They disable DNS in VPC"], "answer": 0, "explanation": "Endpoints reduce NAT dependency and tighten network paths."}, {"id": "q9_9", "question": "What is an IPAM-driven CIDR allocation advantage?", "options": ["Centralized, conflict-resistant CIDR management across environments", "Automatic IAM policy generation", "No need for subnet planning", "Mandatory public addressing"], "answer": 0, "explanation": "IPAM helps large estates avoid overlapping CIDR mistakes."}, {"id": "q9_10", "question": "What should be checked before managing a default VPC with Terraform?", "options": ["Ownership boundaries and impact on existing unmanaged resources", "Only Terraform version", "Only bucket tags", "Only SG descriptions"], "answer": 0, "explanation": "Default VPC adoption can have broad side effects if unmanaged state exists."}, {"id": "q9_11", "question": "Why expose route table, subnet, and VPC IDs as outputs?", "options": ["Downstream modules need explicit network attachment targets", "To speed up terraform fmt", "To disable provider retries", "To replace variable validation"], "answer": 0, "explanation": "Network IDs are key contracts for ECS/EKS/EC2 integrations."}, {"id": "q9_12", "question": "What is a common dualstack pitfall in module design?", "options": ["Enabling IPv6 without corresponding route/security updates", "Using too many tags", "Defining more than one private subnet", "Outputting VPC ARN"], "answer": 0, "explanation": "IPv6 rollout requires coordinated routing, SG, and endpoint configuration."}, {"id": "q9_13", "question": "How do database subnet patterns usually differ from public subnet patterns?", "options": ["No direct internet route and tighter ingress controls", "They require public IP assignment", "They skip route tables", "They disable DNS hostnames"], "answer": 0, "explanation": "Database tiers should remain isolated with explicit access paths."}, {"id": "q9_14", "question": "Why include upgrade/state transition guidance in VPC modules?", "options": ["Address migrations can trigger destructive network replacements", "VPC resources never require migration", "Upgrades only change README text", "Terraform handles all state moves automatically"], "answer": 0, "explanation": "Network primitives are high impact; migration planning is essential."}, {"id": "q9_15", "question": "What is a safe first step when large VPC plan changes appear?", "options": ["Inspect route/subnet/NACL diffs and validate blast radius before apply", "Apply immediately to detect failures faster", "Delete the state file", "Disable flow logs"], "answer": 0, "explanation": "Careful diff review prevents outages from unintended network mutations."}]}]};

let currentSlide = 0;
let quizState = {};
let failedById = {};
let retryMode = false;
let retryQueue = [];
let retryIndex = 0;
let waitingFeedback = false;

const els = {
  slide: document.getElementById('slide'),
  moduleLabel: document.getElementById('module-label'),
  counter: document.getElementById('slide-counter'),
  pct: document.getElementById('pct'),
  progress: document.getElementById('progress-bar'),
  prevBtn: document.getElementById('prev-btn'),
  nextBtn: document.getElementById('next-btn'),
  toc: document.getElementById('toc'),
  tocBody: document.getElementById('toc-body'),
  tocOverlay: document.getElementById('toc-overlay'),
};

function saveState() {
  try {
    localStorage.setItem(STORE_KEY, JSON.stringify({ currentSlide, quizState, failedById }));
  } catch (_e) {}
}

function loadState() {
  try {
    const raw = localStorage.getItem(STORE_KEY);
    if (!raw) return;
    const parsed = JSON.parse(raw);
    if (typeof parsed.currentSlide === 'number') currentSlide = Math.max(0, Math.min(SLIDES.length - 1, parsed.currentSlide));
    if (parsed.quizState && typeof parsed.quizState === 'object') quizState = parsed.quizState;
    if (parsed.failedById && typeof parsed.failedById === 'object') failedById = parsed.failedById;
  } catch (_e) {}
}

function hashSeed(s) {
  let h = 2166136261;
  for (let i = 0; i < s.length; i++) {
    h ^= s.charCodeAt(i);
    h = Math.imul(h, 16777619);
  }
  return (h >>> 0) || 1;
}

function seeded(state) {
  state.v = (1664525 * state.v + 1013904223) % 4294967296;
  return state.v / 4294967296;
}

function shuffledOrder(question) {
  const order = Array.from(question.options.keys());
  const st = { v: hashSeed(question.id) };
  for (let i = order.length - 1; i > 0; i--) {
    const j = Math.floor(seeded(st) * (i + 1));
    const tmp = order[i];
    order[i] = order[j];
    order[j] = tmp;
  }
  return order;
}

function getQuizModule(moduleId) {
  return QUIZ_DATA.modules.find(m => m.id === moduleId);
}

function ensureQuizState(moduleId) {
  if (!quizState[moduleId]) {
    quizState[moduleId] = { cursor: 0, responses: {}, completed: false };
  }
  if (!quizState[moduleId].responses) quizState[moduleId].responses = {};
  return quizState[moduleId];
}

function moduleScore(moduleId) {
  const mod = getQuizModule(moduleId);
  const st = ensureQuizState(moduleId);
  let correct = 0;
  for (const q of mod.questions) {
    if (st.responses[q.id] && st.responses[q.id].correct) correct += 1;
  }
  return { correct, total: mod.questions.length };
}

function buildTOC() {
  const groups = new Map();
  SLIDES.forEach((s, i) => {
    if (!groups.has(s.moduleId)) groups.set(s.moduleId, []);
    groups.get(s.moduleId).push([i, s]);
  });
  let html = '';
  for (const [moduleId, entries] of groups.entries()) {
    html += `<div class="toc-module"><h3>${MODULE_LABELS[moduleId]}</h3>`;
    for (const [idx, slide] of entries) {
      const cls = idx === currentSlide && !retryMode ? 'toc-link active' : 'toc-link';
      html += `<a href="#" class="${cls}" data-idx="${idx}">${slide.title}</a>`;
    }
    html += '</div>';
  }
  els.tocBody.innerHTML = html;
  for (const a of els.tocBody.querySelectorAll('a[data-idx]')) {
    a.addEventListener('click', e => {
      e.preventDefault();
      const idx = Number(a.getAttribute('data-idx'));
      if (Number.isFinite(idx)) {
        retryMode = false;
        currentSlide = idx;
        saveState();
        render();
        toggleTOC(false);
      }
    });
  }
}

function toggleTOC(force) {
  const open = typeof force === 'boolean' ? force : !els.toc.classList.contains('open');
  els.toc.classList.toggle('open', open);
  els.tocOverlay.style.display = open ? 'block' : 'none';
}

function go(step) {
  if (retryMode) return;
  currentSlide = Math.max(0, Math.min(SLIDES.length - 1, currentSlide + step));
  saveState();
  render();
}

function jumpTo(index) {
  if (retryMode) return;
  currentSlide = Math.max(0, Math.min(SLIDES.length - 1, index));
  saveState();
  render();
}

function esc(s) {
  return String(s)
    .replace(/&/g, '&amp;')
    .replace(/</g, '&lt;')
    .replace(/>/g, '&gt;');
}

function renderQuizSlide(moduleId) {
  const mod = getQuizModule(moduleId);
  if (!mod) {
    els.slide.innerHTML = '<div class="warn">Quiz module data missing.</div>';
    return;
  }

  const st = ensureQuizState(moduleId);
  if (st.cursor >= mod.questions.length) st.completed = true;
  const score = moduleScore(moduleId);

  if (st.completed) {
    const moduleFailed = mod.questions.filter(q => failedById[q.id]);
    els.slide.innerHTML = `
      <div class="quiz-wrap">
        <h2>Quiz Complete: ${mod.name}</h2>
        <div class="quiz-header">Score: <strong>${score.correct} / ${score.total}</strong></div>
        <div class="retry-box">Failed questions pending retry: <strong>${moduleFailed.length}</strong></div>
        <div class="row">
          <button id="continue-slide">Continue to next slide</button>
          <button id="retry-module" ${moduleFailed.length ? '' : 'disabled'}>Retry Failed in This Module</button>
        </div>
      </div>
    `;
    const cBtn = document.getElementById('continue-slide');
    cBtn.addEventListener('click', () => go(1));
    const rBtn = document.getElementById('retry-module');
    rBtn.addEventListener('click', () => beginRetry(moduleFailed.map(q => q.id)));
    return;
  }

  const q = mod.questions[st.cursor];
  const order = shuffledOrder(q);

  const optionsHtml = order.map((originalIdx, displayIdx) => `
    <button class="quiz-opt" data-display-idx="${displayIdx}">${esc(q.options[originalIdx])}</button>
  `).join('');

  const pct = Math.round((st.cursor / mod.questions.length) * 100);
  els.slide.innerHTML = `
    <div class="quiz-wrap">
      <h2>Quiz: ${mod.name}</h2>
      <div class="quiz-header">Question ${st.cursor + 1} / ${mod.questions.length}</div>
      <div class="quiz-progress"><div style="width:${pct}%"></div></div>
      <h3>${esc(q.question)}</h3>
      <div>${optionsHtml}</div>
      <div id="quiz-feedback" class="quiz-feedback"></div>
      <div class="tip">Options are deterministically shuffled by question id. Correct answers advance in ~1.2s, wrong answers in ~3s.</div>
    </div>
  `;

  const feedback = document.getElementById('quiz-feedback');
  for (const btn of els.slide.querySelectorAll('.quiz-opt')) {
    btn.addEventListener('click', () => {
      if (waitingFeedback) return;
      waitingFeedback = true;
      for (const b of els.slide.querySelectorAll('.quiz-opt')) b.classList.add('disabled');

      const displayIdx = Number(btn.getAttribute('data-display-idx'));
      const originalIdx = order[displayIdx];
      const selectedText = q.options[originalIdx];
      const correct = originalIdx === q.answer;
      st.responses[q.id] = { selectedOriginalIndex: originalIdx, selectedText, correct };

      if (correct) {
        delete failedById[q.id];
        btn.classList.add('correct');
        feedback.className = 'quiz-feedback show pass';
        feedback.textContent = `Correct. ${q.explanation}`;
      } else {
        failedById[q.id] = {
          moduleId,
          questionId: q.id,
          question: q.question,
          selectedText,
          correctText: q.options[q.answer],
          explanation: q.explanation,
        };
        btn.classList.add('wrong');
        feedback.className = 'quiz-feedback show fail';
        feedback.textContent = `Incorrect. ${q.explanation}`;
      }

      const delay = correct ? 1200 : 3000;
      setTimeout(() => {
        waitingFeedback = false;
        st.cursor += 1;
        if (st.cursor >= mod.questions.length) st.completed = true;
        saveState();
        render();
      }, delay);
    });
  }
}

function beginRetry(questionIds) {
  const ids = questionIds && questionIds.length ? questionIds : Object.keys(failedById);
  const items = ids.map(id => failedById[id]).filter(Boolean);
  if (!items.length) {
    alert('No failed questions recorded.');
    return;
  }
  retryMode = true;
  retryQueue = items;
  retryIndex = 0;
  render();
}

function retryFailed() {
  beginRetry([]);
}

function getQuestion(moduleId, questionId) {
  const mod = getQuizModule(moduleId);
  if (!mod) return null;
  return mod.questions.find(q => q.id === questionId) || null;
}

function renderRetryMode() {
  if (retryIndex >= retryQueue.length) {
    const remaining = Object.keys(failedById).length;
    els.slide.innerHTML = `
      <div class="quiz-wrap">
        <h2>Retry Complete</h2>
        <div class="retry-box">Remaining failed questions: <strong>${remaining}</strong></div>
        <button id="exit-retry">Exit Retry Mode</button>
      </div>
    `;
    document.getElementById('exit-retry').addEventListener('click', () => {
      retryMode = false;
      retryQueue = [];
      retryIndex = 0;
      saveState();
      render();
    });
    return;
  }

  const item = retryQueue[retryIndex];
  const q = getQuestion(item.moduleId, item.questionId);
  if (!q) {
    retryIndex += 1;
    renderRetryMode();
    return;
  }
  const order = shuffledOrder(q);

  els.slide.innerHTML = `
    <div class="quiz-wrap">
      <h2>Retry Failed Questions</h2>
      <div class="quiz-header">Retry ${retryIndex + 1} / ${retryQueue.length}</div>
      <div class="retry-box">
        <div><strong>Previous selection:</strong> ${esc(item.selectedText || 'N/A')}</div>
        <div><strong>Expected answer:</strong> ${esc(item.correctText || 'N/A')}</div>
      </div>
      <h3>${esc(q.question)}</h3>
      <div>
        ${order.map((originalIdx, displayIdx) => `<button class="quiz-opt" data-display-idx="${displayIdx}">${esc(q.options[originalIdx])}</button>`).join('')}
      </div>
      <div id="retry-feedback" class="quiz-feedback"></div>
    </div>
  `;

  const feedback = document.getElementById('retry-feedback');
  for (const btn of els.slide.querySelectorAll('.quiz-opt')) {
    btn.addEventListener('click', () => {
      if (waitingFeedback) return;
      waitingFeedback = true;
      for (const b of els.slide.querySelectorAll('.quiz-opt')) b.classList.add('disabled');

      const displayIdx = Number(btn.getAttribute('data-display-idx'));
      const originalIdx = order[displayIdx];
      const selectedText = q.options[originalIdx];
      const correct = originalIdx === q.answer;

      const st = ensureQuizState(item.moduleId);
      st.responses[q.id] = { selectedOriginalIndex: originalIdx, selectedText, correct };

      if (correct) {
        delete failedById[q.id];
        btn.classList.add('correct');
        feedback.className = 'quiz-feedback show pass';
        feedback.textContent = `Correct. ${q.explanation}`;
      } else {
        failedById[q.id] = { ...item, selectedText, correctText: q.options[q.answer], explanation: q.explanation };
        btn.classList.add('wrong');
        feedback.className = 'quiz-feedback show fail';
        feedback.textContent = `Incorrect. ${q.explanation}`;
      }

      const delay = correct ? 1200 : 3000;
      setTimeout(() => {
        waitingFeedback = false;
        retryIndex += 1;
        saveState();
        render();
      }, delay);
    });
  }
}

function renderSlide() {
  const slide = SLIDES[currentSlide];
  if (!slide) return;
  if (slide.quiz) renderQuizSlide(slide.moduleId);
  else {
    els.slide.innerHTML = `<h1>${esc(slide.title)}</h1>${slide.content}`;
  }
}

function render() {
  const total = SLIDES.length;
  if (!retryMode) {
    const s = SLIDES[currentSlide];
    els.moduleLabel.textContent = MODULE_LABELS[s.moduleId] || 'Module';
    els.counter.textContent = `${currentSlide + 1} / ${total}`;
    const pct = Math.round(((currentSlide + 1) / total) * 100);
    els.pct.textContent = `${pct}%`;
    els.progress.style.width = `${pct}%`;
    els.prevBtn.disabled = currentSlide <= 0;
    els.nextBtn.disabled = currentSlide >= total - 1;
    els.prevBtn.style.display = '';
    els.nextBtn.style.display = '';
    renderSlide();
  } else {
    els.moduleLabel.textContent = 'Retry Failed Questions';
    els.counter.textContent = `${retryIndex + 1} / ${Math.max(retryQueue.length, 1)}`;
    els.pct.textContent = `Retry`;
    els.progress.style.width = '100%';
    els.prevBtn.style.display = 'none';
    els.nextBtn.style.display = 'none';
    renderRetryMode();
  }
  buildTOC();
}

document.getElementById('toc-btn').addEventListener('click', () => toggleTOC());
els.tocOverlay.addEventListener('click', () => toggleTOC(false));
document.getElementById('retry-btn').addEventListener('click', retryFailed);
els.prevBtn.addEventListener('click', () => go(-1));
els.nextBtn.addEventListener('click', () => go(1));

document.addEventListener('keydown', (e) => {
  if (e.target && (e.target.tagName === 'INPUT' || e.target.tagName === 'TEXTAREA')) return;
  if (e.key === 'ArrowRight' || (e.key === ' ' && !e.shiftKey)) {
    e.preventDefault();
    go(1);
    return;
  }
  if (e.key === 'ArrowLeft' || (e.key === ' ' && e.shiftKey)) {
    e.preventDefault();
    go(-1);
    return;
  }
  if (e.key === 'Home') { e.preventDefault(); jumpTo(0); return; }
  if (e.key === 'End') { e.preventDefault(); jumpTo(SLIDES.length - 1); return; }
  if (e.key.toLowerCase() === 't') { e.preventDefault(); toggleTOC(); return; }
  if (e.key.toLowerCase() === 'r') { e.preventDefault(); retryFailed(); return; }
});

loadState();
render();
</script>
</body>
</html>
