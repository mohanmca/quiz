<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <title>Rolling Hash Trapdoors V — Double Hashing and Test Order</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
</head>
<body>
  <main class="article">
    <h1>Rolling Hash Trapdoors V — Double Hashing and Test Order</h1>
    <p>This final quiz targets parameterization, independence of hash pairs, and the reason we test in this particular order.</p>

    <h2>1. Double Hashing</h2>
    <pre><code class="language-python">def H(arr, base, M):
    h = 0
    for x in arr:
        h = ((h * base) % M + x) % M
    return h

def H2(arr, base1, M1, base2, M2):
    return (H(arr, base1, M1), H(arr, base2, M2))
    </code></pre>

    <h2>2. Why Test in This Order</h2>
    <ol>
      <li><strong>Poly hash first:</strong> Establish a trustworthy reference implementation to compare against rolling updates.</li>
      <li><strong>Modulus/normalization:</strong> Ensure arithmetic is correct under subtraction before performing sliding updates.</li>
      <li><strong>Rolling update:</strong> Validate O(1) window transitions using the reference hash.</li>
      <li><strong>Edge cases:</strong> Confirm correctness with Unicode/bytes and negative intermediates.</li>
      <li><strong>Double hashing:</strong> Only after basics are solid, combine two independent pairs to cut collision risk.</li>
    </ol>

    <h2>3. Typical Bug This Catches</h2>
    <ul>
      <li>Mixing left-to-right and right-to-left exponents.</li>
      <li>Forgetting to add <code>M</code> before modulo after subtraction.</li>
      <li>Using the same parameters for both hashes in double hashing.</li>
    </ul>
  </main>
</body>
</html>

